<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head>

<script data-no-instant="">InstantClick.init();</script>


  



<meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>


  
  
    
    
  
  







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "0007218f"
    });
  daovoice('update');
  </script>














  
  
  












  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon.ico.png">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon.ico.png">


  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">


  <link rel="manifest" href="/blog/images/manifest.json">


  <meta name="msapplication-config" content="/blog/images/browserconfig.xml">



  <meta name="keywords" content="java,redis,">





  <link rel="alternate" href="/blog/atom.xml" title="菜鸡不配听歌" type="application/atom+xml">






<meta name="description" content="Redis介绍Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings）， 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets） 与范围查询， bitmaps， hyperloglogs 和 地理空间（geospatial） 索引半径查询。 Redis">
<meta name="keywords" content="java,redis">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis">
<meta property="og:url" content="https://51461.github.io/blog/2019/06/24/redis/index.html">
<meta property="og:site_name" content="菜鸡不配听歌">
<meta property="og:description" content="Redis介绍Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings）， 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets） 与范围查询， bitmaps， hyperloglogs 和 地理空间（geospatial） 索引半径查询。 Redis">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAtNhq.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAtd3V.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAt7Ed.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAUZWt.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAdHL8.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAdvJs.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZA0RCd.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZA0jvq.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZABKaD.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAB3RA.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAB6s0.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZADg1A.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZArn4e.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZArDuq.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAsA2j.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAsmq0.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAsMIU.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAsOoT.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZA2sbR.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZA42cT.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZA5gIA.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAok7Q.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAoUc6.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAHt9s.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAquef.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAqDfJ.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAqHXt.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZALm9J.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZALwut.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAOma8.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAOXWQ.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZAvRiT.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZEpDhV.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZEphA1.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZEpo9K.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZEpHje.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZEpx4P.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZE9FBj.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZE9mCV.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZE9KvF.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZE9Qu4.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZE91b9.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZE9UgO.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZE9XMF.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZECMJP.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/24/ZEC0zT.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZEh19x.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZEhGjO.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZEhYuD.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZEhtDe.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZEhw4I.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZEhf5n.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZE4eRP.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZE4KsS.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZE4Mqg.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZE4lZQ.md.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZE4YR0.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/06/25/ZE4BdJ.png">
<meta property="og:updated_time" content="2019-06-25T00:32:08.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redis">
<meta name="twitter:description" content="Redis介绍Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings）， 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets） 与范围查询， bitmaps， hyperloglogs 和 地理空间（geospatial） 索引半径查询。 Redis">
<meta name="twitter:image" content="https://s2.ax1x.com/2019/06/24/ZAtNhq.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://51461.github.io/blog/2019/06/24/redis/">





  <title>Redis | 菜鸡不配听歌</title>
  








<script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/blog/style.css');</script><style>html {
  font-family: sans-serif; 
  -ms-text-size-adjust: 100%; 
  -webkit-text-size-adjust: 100%; 
}
body {
  margin: 0;
}
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
  display: block;
}
audio,
canvas,
progress,
video {
  display: inline-block; 
  vertical-align: baseline; 
}
audio:not([controls]) {
  display: none;
  height: 0;
}
[hidden],
template {
  display: none;
}
a {
  background-color: transparent;
}
a:active,
a:hover {
  outline: 0;
}
abbr[title] {
  border-bottom: 1px dotted;
}
b,
strong {
  font-weight: bold;
}
dfn {
  font-style: italic;
}
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}
mark {
  background: #ff0;
  color: #000;
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  border: 0;
}
svg:not(:root) {
  overflow: hidden;
}
figure {
  margin: 1em 40px;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}
pre {
  overflow: auto;
}
code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}
button,
input,
optgroup,
select,
textarea {
  color: inherit; 
  font: inherit; 
  margin: 0; 
}
button {
  overflow: visible;
}
button,
select {
  text-transform: none;
}
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button; 
  cursor: pointer; 
}
button[disabled],
html input[disabled] {
  cursor: default;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
input {
  line-height: normal;
}
input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box; 
  padding: 0; 
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  height: auto;
}
input[type="search"] {
  -webkit-appearance: textfield; 
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box; 
  box-sizing: content-box;
}
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  border: 0; 
  padding: 0; 
}
textarea {
  overflow: auto;
}
optgroup {
  font-weight: bold;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
td,
th {
  padding: 0;
}
::selection {
  background: #262a30;
  color: #fff;
}
body {
  position: relative;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
  font-size: 14px;
  line-height: 2;
  color: #555;
  background: #eee;
}
@media (max-width: 767px) {
  body {
    padding-right: 0 !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  body {
    padding-right: 0 !important;
  }
}
@media (min-width: 1600px) {
  body {
    font-size: 16px;
  }
}
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  padding: 0;
  font-weight: bold;
  line-height: 1.5;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
}
h2,
h3,
h4,
h5,
h6 {
  margin: 20px 0 15px;
}
h1 {
  font-size: 22px;
}
@media (max-width: 767px) {
  h1 {
    font-size: 18px;
  }
}
h2 {
  font-size: 20px;
}
@media (max-width: 767px) {
  h2 {
    font-size: 16px;
  }
}
h3 {
  font-size: 18px;
}
@media (max-width: 767px) {
  h3 {
    font-size: 14px;
  }
}
h4 {
  font-size: 16px;
}
@media (max-width: 767px) {
  h4 {
    font-size: 12px;
  }
}
h5 {
  font-size: 14px;
}
@media (max-width: 767px) {
  h5 {
    font-size: 10px;
  }
}
h6 {
  font-size: 12px;
}
@media (max-width: 767px) {
  h6 {
    font-size: 8px;
  }
}
p {
  margin: 0 0 20px 0;
}
a {
  color: #555;
  text-decoration: none;
  outline: none;
  border-bottom: 1px solid #999;
  word-wrap: break-word;
}
a:hover {
  color: #222;
  border-bottom-color: #222;
}
blockquote {
  margin: 0;
  padding: 0;
}
img {
  display: block;
  margin: auto;
  max-width: 100%;
  height: auto;
}
hr {
  margin: 40px 0;
  height: 3px;
  border: none;
  background-color: #ddd;
  background-image: repeating-linear-gradient(-45deg, #fff, #fff 4px, transparent 4px, transparent 8px);
}
blockquote {
  padding: 0 15px;
  color: #666;
  border-left: 4px solid #ddd;
}
blockquote cite::before {
  content: "-";
  padding: 0 5px;
}
dt {
  font-weight: 700;
}
dd {
  margin: 0;
  padding: 0;
}
kbd {
  border: 1px solid #ccc;
  border-radius: 0.2em;
  box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1);
  background-color: #f9f9f9;
  font-family: inherit;
  background-image: -webkit-linear-gradient(top, #eee, #fff, #eee);
  padding: 0.1em 0.3em;
  white-space: nowrap;
}
.text-left {
  text-align: left;
}
.text-center {
  text-align: center;
}
.text-right {
  text-align: right;
}
.text-justify {
  text-align: justify;
}
.text-nowrap {
  white-space: nowrap;
}
.text-lowercase {
  text-transform: lowercase;
}
.text-uppercase {
  text-transform: uppercase;
}
.text-capitalize {
  text-transform: capitalize;
}
.center-block {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.clearfix:before,
.clearfix:after {
  content: " ";
  display: table;
}
.clearfix:after {
  clear: both;
}
.pullquote {
  width: 45%;
}
.pullquote.left {
  float: left;
  margin-left: 5px;
  margin-right: 10px;
}
.pullquote.right {
  float: right;
  margin-left: 10px;
  margin-right: 5px;
}
.affix.affix.affix {
  position: fixed;
}
.translation {
  margin-top: -20px;
  font-size: 14px;
  color: #999;
}
.scrollbar-measure {
  width: 100px;
  height: 100px;
  overflow: scroll;
  position: absolute;
  top: -9999px;
}
.use-motion .motion-element {
  opacity: 0;
}
table {
  margin: 20px 0;
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  border: 1px solid #ddd;
  font-size: 14px;
  table-layout: fixed;
  word-wrap: break-all;
}
table>tbody>tr:nth-of-type(odd) {
  background-color: #f9f9f9;
}
table>tbody>tr:hover {
  background-color: #f5f5f5;
}
caption,
th,
td {
  padding: 8px;
  text-align: left;
  vertical-align: middle;
  font-weight: normal;
}
th,
td {
  border-bottom: 3px solid #ddd;
  border-right: 1px solid #eee;
}
th {
  padding-bottom: 10px;
  font-weight: 700;
}
td {
  border-bottom-width: 1px;
}
html,
body {
  height: 100%;
}
.container {
  position: relative;
  min-height: 100%;
}
.header-inner {
  margin: 0 auto;
  padding: 100px 0 70px;
  width: calc(100% - 252px);
}
@media (min-width: 1600px) {
  .container .header-inner {
    width: 900px;
  }
}
.main {
  padding-bottom: 150px;
}
.main-inner {
  margin: 0 auto;
  width: calc(100% - 252px);
}
@media (min-width: 1600px) {
  .container .main-inner {
    width: 900px;
  }
}
.footer {
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  min-height: 50px;
}
.footer-inner {
  box-sizing: border-box;
  margin: 20px auto;
  width: calc(100% - 252px);
}
@media (min-width: 1600px) {
  .container .footer-inner {
    width: 900px;
  }
}
pre,
.highlight {
  overflow: auto;
  margin: 20px 0;
  padding: 0;
  font-size: 13px;
  color: #4d4d4c;
  background: #f7f7f7;
  line-height: 1.6;
}
pre,
code {
  font-family: consolas, Menlo, "PingFang SC", "Microsoft YaHei", monospace;
}
code {
  padding: 2px 4px;
  word-wrap: break-word;
  color: #555;
  background: #eee;
  border-radius: 3px;
  font-size: 13px;
}
pre {
  padding: 10px;
}
pre code {
  padding: 0;
  color: #4d4d4c;
  background: none;
  text-shadow: none;
}
.highlight {
  border-radius: 1px;
}
.highlight pre {
  border: none;
  margin: 0;
  padding: 10px 0;
}
.highlight table {
  margin: 0;
  width: auto;
  border: none;
}
.highlight td {
  border: none;
  padding: 0;
}
.highlight figcaption {
  font-size: 1em;
  color: #4d4d4c;
  line-height: 1em;
  margin-bottom: 1em;
}
.highlight figcaption:before,
.highlight figcaption:after {
  content: " ";
  display: table;
}
.highlight figcaption:after {
  clear: both;
}
.highlight figcaption a {
  float: right;
  color: #4d4d4c;
}
.highlight figcaption a:hover {
  border-bottom-color: #4d4d4c;
}
.highlight .gutter pre {
  padding-left: 10px;
  padding-right: 10px;
  color: #869194;
  text-align: right;
  background-color: #eff2f3;
}
.highlight .code pre {
  width: 100%;
  padding-left: 10px;
  padding-right: 10px;
  background-color: #f7f7f7;
}
.highlight .line {
  height: 20px;
}
.gutter {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.gist table {
  width: auto;
}
.gist table td {
  border: none;
}
pre .deletion {
  background: #fdd;
}
pre .addition {
  background: #dfd;
}
pre .meta {
  color: #8959a8;
}
pre .comment {
  color: #8e908c;
}
pre .variable,
pre .attribute,
pre .tag,
pre .regexp,
pre .ruby .constant,
pre .xml .tag .title,
pre .xml .pi,
pre .xml .doctype,
pre .html .doctype,
pre .css .id,
pre .css .class,
pre .css .pseudo {
  color: #c82829;
}
pre .number,
pre .preprocessor,
pre .built_in,
pre .literal,
pre .params,
pre .constant,
pre .command {
  color: #f5871f;
}
pre .ruby .class .title,
pre .css .rules .attribute,
pre .string,
pre .value,
pre .inheritance,
pre .header,
pre .ruby .symbol,
pre .xml .cdata,
pre .special,
pre .number,
pre .formula {
  color: #718c00;
}
pre .title,
pre .css .hexcolor {
  color: #3e999f;
}
pre .function,
pre .python .decorator,
pre .python .title,
pre .ruby .function .title,
pre .ruby .title .keyword,
pre .perl .sub,
pre .javascript .title,
pre .coffeescript .title {
  color: #4271ae;
}
pre .keyword,
pre .javascript .function {
  color: #8959a8;
}
.full-image.full-image.full-image.full-image {
  border: none;
  max-width: 100%;
  width: auto;
  margin: 20px auto 25px;
}
@media (min-width: 992px) {
  .full-image.full-image.full-image.full-image {
    max-width: none;
    width: 118%;
    margin: 0 -9%;
  }
}
.blockquote-center,
.page-home .post-type-quote blockquote,
.page-post-detail .post-type-quote blockquote {
  position: relative;
  margin: 40px 0;
  padding: 0;
  border-left: none;
  text-align: center;
}
.blockquote-center::before,
.page-home .post-type-quote blockquote::before,
.page-post-detail .post-type-quote blockquote::before,
.blockquote-center::after,
.page-home .post-type-quote blockquote::after,
.page-post-detail .post-type-quote blockquote::after {
  position: absolute;
  content: ' ';
  display: block;
  width: 100%;
  height: 24px;
  opacity: 0.2;
  background-repeat: no-repeat;
  background-position: 0 -6px;
  background-size: 22px 22px;
}
.blockquote-center::before,
.page-home .post-type-quote blockquote::before,
.page-post-detail .post-type-quote blockquote::before {
  top: -20px;
  background-image: url("../images/quote-l.svg");
  border-top: 1px solid #ccc;
}
.blockquote-center::after,
.page-home .post-type-quote blockquote::after,
.page-post-detail .post-type-quote blockquote::after {
  bottom: -20px;
  background-image: url("../images/quote-r.svg");
  border-bottom: 1px solid #ccc;
  background-position: 100% 8px;
}
.blockquote-center p,
.page-home .post-type-quote blockquote p,
.page-post-detail .post-type-quote blockquote p,
.blockquote-center div,
.page-home .post-type-quote blockquote div,
.page-post-detail .post-type-quote blockquote div {
  text-align: center;
}
.post .post-body .group-picture img {
  box-sizing: border-box;
  padding: 0 3px;
  border: none;
}
.post .group-picture-row {
  overflow: hidden;
  margin-top: 6px;
}
.post .group-picture-row:first-child {
  margin-top: 0;
}
.post .group-picture-column {
  float: left;
}
.page-post-detail .post-body .group-picture-column {
  float: none;
  margin-top: 10px;
  width: auto !important;
}
.page-post-detail .post-body .group-picture-column img {
  margin: 0 auto;
}
.page-archive .group-picture-container {
  overflow: hidden;
}
.page-archive .group-picture-row {
  float: left;
}
.page-archive .group-picture-row:first-child {
  margin-top: 6px;
}
.page-archive .group-picture-column {
  max-width: 150px;
  max-height: 150px;
}
.post-body .note {
  position: relative;
  padding: 15px;
  margin-bottom: 20px;
  border: 1px solid #eee;
  border-left-width: 5px;
  border-radius: 3px;
}
.post-body .note h2,
.post-body .note h3,
.post-body .note h4,
.post-body .note h5,
.post-body .note h6 {
  margin-top: 0;
  margin-bottom: 0;
  border-bottom: initial;
  padding-top: 0 !important;
}
.post-body .note p:first-child,
.post-body .note ul:first-child,
.post-body .note ol:first-child,
.post-body .note table:first-child,
.post-body .note pre:first-child,
.post-body .note blockquote:first-child {
  margin-top: 0;
}
.post-body .note p:last-child,
.post-body .note ul:last-child,
.post-body .note ol:last-child,
.post-body .note table:last-child,
.post-body .note pre:last-child,
.post-body .note blockquote:last-child {
  margin-bottom: 0;
}
.post-body .note.default {
  border-left-color: #777;
}
.post-body .note.default h2,
.post-body .note.default h3,
.post-body .note.default h4,
.post-body .note.default h5,
.post-body .note.default h6 {
  color: #777;
}
.post-body .note.primary {
  border-left-color: #6f42c1;
}
.post-body .note.primary h2,
.post-body .note.primary h3,
.post-body .note.primary h4,
.post-body .note.primary h5,
.post-body .note.primary h6 {
  color: #6f42c1;
}
.post-body .note.info {
  border-left-color: #428bca;
}
.post-body .note.info h2,
.post-body .note.info h3,
.post-body .note.info h4,
.post-body .note.info h5,
.post-body .note.info h6 {
  color: #428bca;
}
.post-body .note.success {
  border-left-color: #5cb85c;
}
.post-body .note.success h2,
.post-body .note.success h3,
.post-body .note.success h4,
.post-body .note.success h5,
.post-body .note.success h6 {
  color: #5cb85c;
}
.post-body .note.warning {
  border-left-color: #f0ad4e;
}
.post-body .note.warning h2,
.post-body .note.warning h3,
.post-body .note.warning h4,
.post-body .note.warning h5,
.post-body .note.warning h6 {
  color: #f0ad4e;
}
.post-body .note.danger {
  border-left-color: #d9534f;
}
.post-body .note.danger h2,
.post-body .note.danger h3,
.post-body .note.danger h4,
.post-body .note.danger h5,
.post-body .note.danger h6 {
  color: #d9534f;
}
.post-body .label {
  display: inline;
  padding: 0 2px;
  white-space: nowrap;
}
.post-body .label.default {
  background-color: #f0f0f0;
}
.post-body .label.primary {
  background-color: #efe6f7;
}
.post-body .label.info {
  background-color: #e5f2f8;
}
.post-body .label.success {
  background-color: #e7f4e9;
}
.post-body .label.warning {
  background-color: #fcf6e1;
}
.post-body .label.danger {
  background-color: #fae8eb;
}
.post-body .tabs {
  position: relative;
  display: block;
  margin-bottom: 20px;
  padding-top: 10px;
}
.post-body .tabs ul.nav-tabs {
  margin: 0;
  padding: 0;
  display: flex;
  margin-bottom: -1px;
}
@media (max-width: 413px) {
  .post-body .tabs ul.nav-tabs {
    display: block;
    margin-bottom: 5px;
  }
}
.post-body .tabs ul.nav-tabs li.tab {
  list-style-type: none !important;
  margin: 0 0.25em 0 0;
  border-top: 3px solid transparent;
  border-left: 1px solid transparent;
  border-right: 1px solid transparent;
}
@media (max-width: 413px) {
  .post-body .tabs ul.nav-tabs li.tab {
    margin: initial;
    border-top: 1px solid transparent;
    border-left: 3px solid transparent;
    border-right: 1px solid transparent;
    border-bottom: 1px solid transparent;
  }
}
.post-body .tabs ul.nav-tabs li.tab a {
  outline: 0;
  border-bottom: initial;
  display: block;
  line-height: 1.8em;
  padding: 0.25em 0.75em;
  transition-duration: 0.2s;
  transition-timing-function: ease-out;
  transition-delay: 0s;
}
.post-body .tabs ul.nav-tabs li.tab a i {
  width: 1.285714285714286em;
}
.post-body .tabs ul.nav-tabs li.tab.active {
  border-top: 3px solid #fc6423;
  border-left: 1px solid #ddd;
  border-right: 1px solid #ddd;
  background-color: #fff;
}
@media (max-width: 413px) {
  .post-body .tabs ul.nav-tabs li.tab.active {
    border-top: 1px solid #ddd;
    border-left: 3px solid #fc6423;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
  }
}
.post-body .tabs ul.nav-tabs li.tab.active a {
  cursor: default;
  color: #555;
}
.post-body .tabs .tab-content {
  background-color: #fff;
}
.post-body .tabs .tab-content .tab-pane {
  border: 1px solid #ddd;
  padding: 20px 20px 0 20px;
}
.post-body .tabs .tab-content .tab-pane:not(.active) {
  display: none !important;
}
.post-body .tabs .tab-content .tab-pane.active {
  display: block !important;
}
.btn {
  display: inline-block;
  padding: 0 20px;
  font-size: 14px;
  color: #555;
  background: #fff;
  border: 2px solid #555;
  text-decoration: none;
  border-radius: 2px;
  transition-property: background-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  line-height: 2;
}
.btn:hover {
  border-color: #222;
  color: #fff;
  background: #222;
}
.btn +.btn {
  margin: 0 0 8px 8px;
}
.btn .fa-fw {
  width: 1.285714285714286em;
  text-align: left;
}
.btn-bar {
  display: block;
  width: 22px;
  height: 2px;
  background: #555;
  border-radius: 1px;
}
.btn-bar+.btn-bar {
  margin-top: 4px;
}
.pagination {
  margin: 120px 0 40px;
  text-align: center;
  border-top: 1px solid #eee;
}
.page-number-basic,
.pagination .prev,
.pagination .next,
.pagination .page-number,
.pagination .space {
  display: inline-block;
  position: relative;
  top: -1px;
  margin: 0 10px;
  padding: 0 11px;
}
@media (max-width: 767px) {
  .page-number-basic,
  .pagination .prev,
  .pagination .next,
  .pagination .page-number,
  .pagination .space {
    margin: 0 5px;
  }
}
.pagination .prev,
.pagination .next,
.pagination .page-number {
  border-bottom: 0;
  border-top: 1px solid #eee;
  transition-property: border-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.pagination .prev:hover,
.pagination .next:hover,
.pagination .page-number:hover {
  border-top-color: #222;
}
.pagination .space {
  padding: 0;
  margin: 0;
}
.pagination .prev {
  margin-left: 0;
}
.pagination .next {
  margin-right: 0;
}
.pagination .page-number.current {
  color: #fff;
  background: #ccc;
  border-top-color: #ccc;
}
@media (max-width: 767px) {
  .pagination {
    border-top: none;
  }
  .pagination .prev,
  .pagination .next,
  .pagination .page-number {
    margin-bottom: 10px;
    border-top: 0;
    border-bottom: 1px solid #eee;
    padding: 0 10px;
  }
  .pagination .prev:hover,
  .pagination .next:hover,
  .pagination .page-number:hover {
    border-bottom-color: #222;
  }
}
.comments {
  margin: 60px 20px 0;
}
.tag-cloud {
  text-align: center;
}
.tag-cloud a {
  display: inline-block;
  margin: 10px;
}
.back-to-top {
  box-sizing: border-box;
  position: fixed;
  bottom: -100px;
  right: 30px;
  z-index: 1050;
  padding: 0 6px;
  width: initial;
  background: #222;
  font-size: 12px;
  opacity: 0.6;
  color: #fff;
  cursor: pointer;
  text-align: center;
  -webkit-transform: translateZ(0);
  transition-property: bottom;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
@media (min-width: 768px) and (max-width: 991px) {
  .back-to-top {
    display: none !important;
  }
}
@media (max-width: 767px) {
  .back-to-top {
    display: none !important;
  }
}
.back-to-top.back-to-top-on {
  bottom: 30px;
}
.header {
  background: transparent;
}
.header-inner {
  position: relative;
}
.headband {
  height: 3px;
  background: #222;
}
.site-meta {
  margin: 0;
  text-align: center;
}
@media (max-width: 767px) {
  .site-meta {
    text-align: center;
  }
}
.brand {
  position: relative;
  display: inline-block;
  padding: 0 40px;
  color: #fff;
  background: #222;
  border-bottom: none;
}
.brand:hover {
  color: #fff;
}
.logo {
  display: inline-block;
  margin-right: 5px;
  line-height: 36px;
  vertical-align: top;
}
.site-title {
  display: inline-block;
  vertical-align: top;
  line-height: 36px;
  font-size: 20px;
  font-weight: normal;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
}
.site-subtitle {
  margin-top: 10px;
  font-size: 13px;
  color: #ddd;
}
.use-motion .brand {
  opacity: 0;
}
.use-motion .logo,
.use-motion .site-title,
.use-motion .site-subtitle {
  opacity: 0;
  position: relative;
  top: -10px;
}
.site-nav-toggle {
  display: none;
  position: absolute;
  top: 10px;
  left: 10px;
}
@media (max-width: 767px) {
  .site-nav-toggle {
    display: block;
  }
}
.site-nav-toggle button {
  margin-top: 2px;
  padding: 9px 10px;
  background: transparent;
  border: none;
}
@media (max-width: 767px) {
  .site-nav {
    display: none;
    margin: 0 -10px;
    padding: 0 10px;
    clear: both;
    border-top: 1px solid #ddd;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav {
    display: block !important;
  }
}
@media (min-width: 992px) {
  .site-nav {
    display: block !important;
  }
}
.menu {
  margin-top: 20px;
  padding-left: 0;
  text-align: center;
}
.menu .menu-item {
  display: inline-block;
  margin: 0 10px;
  list-style: none;
}
@media screen and (max-width: 767px) {
  .menu .menu-item {
    margin-top: 10px;
  }
}
.menu .menu-item a {
  display: block;
  font-size: 13px;
  line-height: inherit;
  border-bottom: 1px solid transparent;
  transition-property: border-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.menu .menu-item a:hover,
.menu-item-active a {
  border-bottom-color: #222;
}
.menu .menu-item .fa {
  margin-right: 5px;
}
.use-motion .menu-item {
  opacity: 0;
}
.post-body {
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
}
@media (max-width: 767px) {
  .post-body {
    word-break: break-word;
  }
}
.post-body .fancybox img {
  display: block !important;
  margin: 0 auto;
  cursor: pointer;
  cursor: zoom-in;
  cursor: -webkit-zoom-in;
}
.post-body .image-caption,
.post-body .figure .caption {
  margin: -20px auto 15px;
  text-align: center;
  font-size: 14px;
  color: #999;
  font-weight: bold;
  line-height: 1;
}
.post-sticky-flag {
  display: inline-block;
  font-size: 16px;
  -ms-transform: rotate(30deg);
  -webkit-transform: rotate(30deg);
  -moz-transform: rotate(30deg);
  -ms-transform: rotate(30deg);
  -o-transform: rotate(30deg);
  transform: rotate(30deg);
}
.use-motion .post-block,
.use-motion .pagination,
.use-motion .comments {
  opacity: 0;
}
.use-motion .post-header {
  opacity: 0;
}
.use-motion .post-body {
  opacity: 0;
}
.use-motion .collection-title {
  opacity: 0;
}
.posts-expand {
  padding-top: 40px;
}
@media (max-width: 767px) {
  .posts-expand {
    margin: 0 20px;
  }
  .post-body pre .gutter pre {
    padding-right: 10px;
  }
  .post-body .highlight {
    margin-left: 0px;
    margin-right: 0px;
    padding: 0;
  }
  .post-body .highlight .gutter pre {
    padding-right: 10px;
  }
}
@media (min-width: 992px) {
  .posts-expand .post-body {
    text-align: justify;
  }
}
.posts-expand .post-body h2,
.posts-expand .post-body h3,
.posts-expand .post-body h4,
.posts-expand .post-body h5,
.posts-expand .post-body h6 {
  padding-top: 10px;
}
.posts-expand .post-body h2 .header-anchor,
.posts-expand .post-body h3 .header-anchor,
.posts-expand .post-body h4 .header-anchor,
.posts-expand .post-body h5 .header-anchor,
.posts-expand .post-body h6 .header-anchor {
  float: right;
  margin-left: 10px;
  color: #ccc;
  border-bottom-style: none;
  visibility: hidden;
}
.posts-expand .post-body h2 .header-anchor:hover,
.posts-expand .post-body h3 .header-anchor:hover,
.posts-expand .post-body h4 .header-anchor:hover,
.posts-expand .post-body h5 .header-anchor:hover,
.posts-expand .post-body h6 .header-anchor:hover {
  color: inherit;
}
.posts-expand .post-body h2:hover .header-anchor,
.posts-expand .post-body h3:hover .header-anchor,
.posts-expand .post-body h4:hover .header-anchor,
.posts-expand .post-body h5:hover .header-anchor,
.posts-expand .post-body h6:hover .header-anchor {
  visibility: visible;
}
.posts-expand .post-body ul li {
  list-style: circle;
}
.posts-expand .post-body img {
  box-sizing: border-box;
  margin: auto;
  padding: 3px;
  border: 1px solid #ddd;
}
.posts-expand .post-body .fancybox img {
  margin: 0 auto 25px;
}
@media (max-width: 767px) {
  .posts-collapse {
    margin: 0 20px;
  }
  .posts-collapse .post-title,
  .posts-collapse .post-meta {
    display: block;
    width: auto;
    text-align: left;
  }
}
.posts-collapse {
  position: relative;
  z-index: 1010;
  margin-left: 55px;
}
.posts-collapse::after {
  content: " ";
  position: absolute;
  top: 20px;
  left: 0;
  margin-left: -2px;
  width: 4px;
  height: 100%;
  background: #f5f5f5;
  z-index: -1;
}
@media (max-width: 767px) {
  .posts-collapse {
    margin: 0 20px;
  }
}
.posts-collapse .collection-title {
  position: relative;
  margin: 60px 0;
}
.posts-collapse .collection-title h1,
.posts-collapse .collection-title h2 {
  margin-left: 20px;
}
.posts-collapse .collection-title small {
  color: #bbb;
  margin-left: 5px;
}
.posts-collapse .collection-title::before {
  content: " ";
  position: absolute;
  left: 0;
  top: 50%;
  margin-left: -4px;
  margin-top: -4px;
  width: 8px;
  height: 8px;
  background: #bbb;
  border-radius: 50%;
}
.posts-collapse .post {
  margin: 30px 0;
}
.posts-collapse .post-header {
  position: relative;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  transition-property: border;
  border-bottom: 1px dashed #ccc;
}
.posts-collapse .post-header::before {
  content: " ";
  position: absolute;
  left: 0;
  top: 12px;
  width: 6px;
  height: 6px;
  margin-left: -4px;
  background: #bbb;
  border-radius: 50%;
  border: 1px solid #fff;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  transition-property: background;
}
.posts-collapse .post-header:hover {
  border-bottom-color: #666;
}
.posts-collapse .post-header:hover::before {
  background: #222;
}
.posts-collapse .post-meta {
  position: absolute;
  font-size: 12px;
  left: 20px;
  top: 5px;
}
.posts-collapse .post-comments-count {
  display: none;
}
.posts-collapse .post-title {
  margin-left: 60px;
  font-size: 16px;
  font-weight: normal;
  line-height: inherit;
}
.posts-collapse .post-title::after {
  margin-left: 3px;
  opacity: 0.6;
}
.posts-collapse .post-title a {
  color: #666;
  border-bottom: none;
}
.page-home .post-type-quote .post-header,
.page-post-detail .post-type-quote .post-header,
.page-home .post-type-quote .post-tags,
.page-post-detail .post-type-quote .post-tags {
  display: none;
}
.posts-expand .post-title {
  text-align: center;
  word-break: break-word;
  font-weight: 400;
}
.posts-expand .post-title-link {
  display: inline-block;
  position: relative;
  color: #555;
  border-bottom: none;
  line-height: 1.2;
  vertical-align: top;
}
.posts-expand .post-title-link::before {
  content: "";
  position: absolute;
  width: 100%;
  height: 2px;
  bottom: 0;
  left: 0;
  background-color: #000;
  visibility: hidden;
  -webkit-transform: scaleX(0);
  -moz-transform: scaleX(0);
  -ms-transform: scaleX(0);
  -o-transform: scaleX(0);
  transform: scaleX(0);
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.posts-expand .post-title-link:hover::before {
  visibility: visible;
  -webkit-transform: scaleX(1);
  -moz-transform: scaleX(1);
  -ms-transform: scaleX(1);
  -o-transform: scaleX(1);
  transform: scaleX(1);
}
.posts-expand .post-title-link .fa {
  font-size: 16px;
}
.posts-expand .post-meta {
  margin: 3px 0 60px 0;
  color: #999;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
  font-size: 12px;
  text-align: center;
}
.posts-expand .post-meta .post-category-list {
  display: inline-block;
  margin: 0;
  padding: 3px;
}
.posts-expand .post-meta .post-category-list-link {
  color: #999;
}
.posts-expand .post-meta .post-description {
  font-size: 14px;
  margin-top: 2px;
}
.post-meta-divider {
  margin: 0 0.5em;
}
.post-meta-item-icon {
  margin-right: 3px;
}
@media (min-width: 768px) and (max-width: 991px) {
  .post-meta-item-icon {
    display: inline-block;
  }
}
@media (max-width: 767px) {
  .post-meta-item-icon {
    display: inline-block;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .post-meta-item-text {
    display: none;
  }
}
@media (max-width: 767px) {
  .post-meta-item-text {
    display: none;
  }
}
@media (max-width: 767px) {
  .posts-expand .post-comments-count {
    display: none;
  }
}
.post-button {
  margin-top: 40px;
}
.posts-expand .post-tags {
  margin-top: 40px;
  text-align: center;
}
.posts-expand .post-tags a {
  display: inline-block;
  margin-right: 10px;
  font-size: 13px;
}
.post-nav {
  display: table;
  margin-top: 15px;
  width: 100%;
  border-top: 1px solid #eee;
}
.post-nav-divider {
  display: table-cell;
  width: 10%;
}
.post-nav-item {
  display: table-cell;
  padding: 10px 0 0 0;
  width: 45%;
  vertical-align: top;
}
.post-nav-item a {
  position: relative;
  display: block;
  line-height: 25px;
  font-size: 14px;
  color: #555;
  border-bottom: none;
}
.post-nav-item a:hover {
  color: #222;
  border-bottom: none;
}
.post-nav-item a:active {
  top: 2px;
}
.post-nav-item .fa {
  position: absolute;
  top: 8px;
  left: 0;
  font-size: 12px;
}
.post-nav-next a {
  padding-left: 15px;
}
.post-nav-prev {
  text-align: right;
}
.post-nav-prev a {
  padding-right: 15px;
}
.post-nav-prev .fa {
  right: 0;
  left: auto;
}
.posts-expand .post-eof {
  display: block;
  margin: 80px auto 60px;
  width: 8%;
  height: 1px;
  background: #ccc;
  text-align: center;
}
.post:last-child .post-eof.post-eof.post-eof {
  display: none;
}
.post-gallery {
  display: table;
  table-layout: fixed;
  width: 100%;
  border-collapse: separate;
}
.post-gallery-row {
  display: table-row;
}
.post-gallery .post-gallery-img {
  display: table-cell;
  text-align: center;
  vertical-align: middle;
  border: none;
}
.post-gallery .post-gallery-img img {
  max-width: 100%;
  max-height: 100%;
  border: none;
}
.fancybox-close,
.fancybox-close:hover {
  border: none;
}
#rewardButton {
  cursor: pointer;
  border: 0;
  outline: 0;
  border-radius: 5px;
  padding: 0;
  margin: 0;
  letter-spacing: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
}
#rewardButton span {
  display: inline-block;
  width: 80px;
  height: 35px;
  border-radius: 5px;
  color: #fff;
  font-weight: 400;
  font-style: normal;
  font-variant: normal;
  font-stretch: normal;
  font-size: 18px;
  font-family: "Microsoft Yahei";
  background: #f44336;
}
#rewardButton span:hover {
  background: #f7877f;
}
#QR {
  padding-top: 20px;
}
#QR a {
  border: 0;
}
#QR img {
  width: 180px;
  max-width: 100%;
  display: inline-block;
  margin: 0.8em 2em 0 2em;
}
#wechat:hover p {
  animation: roll 0.1s infinite linear;
  -webkit-animation: roll 0.1s infinite linear;
  -moz-animation: roll 0.1s infinite linear;
}
#alipay:hover p {
  animation: roll 0.1s infinite linear;
  -webkit-animation: roll 0.1s infinite linear;
  -moz-animation: roll 0.1s infinite linear;
}
#bitcoin:hover p {
  animation: roll 0.1s infinite linear;
  -webkit-animation: roll 0.1s infinite linear;
  -moz-animation: roll 0.1s infinite linear;
}
@-moz-keyframes roll {
  from {
    -webkit-transform: rotateZ(30deg);
    -moz-transform: rotateZ(30deg);
    -ms-transform: rotateZ(30deg);
    -o-transform: rotateZ(30deg);
    transform: rotateZ(30deg);
  }
  to {
    -webkit-transform: rotateZ(-30deg);
    -moz-transform: rotateZ(-30deg);
    -ms-transform: rotateZ(-30deg);
    -o-transform: rotateZ(-30deg);
    transform: rotateZ(-30deg);
  }
}
@-webkit-keyframes roll {
  from {
    -webkit-transform: rotateZ(30deg);
    -moz-transform: rotateZ(30deg);
    -ms-transform: rotateZ(30deg);
    -o-transform: rotateZ(30deg);
    transform: rotateZ(30deg);
  }
  to {
    -webkit-transform: rotateZ(-30deg);
    -moz-transform: rotateZ(-30deg);
    -ms-transform: rotateZ(-30deg);
    -o-transform: rotateZ(-30deg);
    transform: rotateZ(-30deg);
  }
}
@-o-keyframes roll {
  from {
    -webkit-transform: rotateZ(30deg);
    -moz-transform: rotateZ(30deg);
    -ms-transform: rotateZ(30deg);
    -o-transform: rotateZ(30deg);
    transform: rotateZ(30deg);
  }
  to {
    -webkit-transform: rotateZ(-30deg);
    -moz-transform: rotateZ(-30deg);
    -ms-transform: rotateZ(-30deg);
    -o-transform: rotateZ(-30deg);
    transform: rotateZ(-30deg);
  }
}
@keyframes roll {
  from {
    -webkit-transform: rotateZ(30deg);
    -moz-transform: rotateZ(30deg);
    -ms-transform: rotateZ(30deg);
    -o-transform: rotateZ(30deg);
    transform: rotateZ(30deg);
  }
  to {
    -webkit-transform: rotateZ(-30deg);
    -moz-transform: rotateZ(-30deg);
    -ms-transform: rotateZ(-30deg);
    -o-transform: rotateZ(-30deg);
    transform: rotateZ(-30deg);
  }
}
.post-widgets {
  border-top: 1px solid #eee;
  padding-top: 9px;
  margin-top: 45px;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  align-items: center;
}
.post-widgets .post-meta-divider {
  height: 28px;
  color: #999;
}
.wp_rating {
  height: 20px;
  margin-right: 10px;
  text-align: center;
  line-height: 20px;
  padding-top: 6px;
}
.social-like {
  font-size: 14px;
  text-align: center;
  display: flex;
  justify-content: center;
}
.vk_like {
  width: 85px;
  height: 21px;
  padding-top: 7px;
  align-self: center;
}
.fb_like {
  height: 30px;
  align-self: center;
}
.rtl.post-body p,
.rtl.post-body a,
.rtl.post-body h1,
.rtl.post-body h2,
.rtl.post-body h3,
.rtl.post-body h4,
.rtl.post-body h5,
.rtl.post-body h6,
.rtl.post-body li,
.rtl.post-body ul,
.rtl.post-body ol {
  direction: rtl;
  font-family: UKIJ Ekran;
}
.rtl.post-title {
  font-family: UKIJ Ekran;
}
.post-body p a {
  color: #345;
  border-bottom: none;
}
.post-body p a:hover {
  color: #800080;
}
.sidebar {
  position: fixed;
  right: 0;
  top: 0;
  bottom: 0;
  width: 0;
  z-index: 1040;
  box-shadow: inset 0 2px 6px #000;
  background: #222;
  -webkit-transform: translateZ(0);
}
.sidebar a {
  color: #999;
  border-bottom-color: #555;
}
.sidebar a:hover {
  color: #eee;
}
@media (min-width: 768px) and (max-width: 991px) {
  .sidebar {
    display: none !important;
  }
}
@media (max-width: 767px) {
  .sidebar {
    display: none !important;
  }
}
.sidebar-inner {
  position: relative;
  padding: 20px 10px;
  color: #999;
  text-align: center;
}
.site-overview-wrap {
  overflow: hidden;
}
.site-overview {
  overflow-y: auto;
  overflow-x: hidden;
}
.sidebar-toggle {
  position: fixed;
  right: 30px;
  bottom: 45px;
  width: 14px;
  height: 14px;
  padding: 5px;
  background: #222;
  line-height: 0;
  z-index: 1050;
  cursor: pointer;
  -webkit-transform: translateZ(0);
}
@media (min-width: 768px) and (max-width: 991px) {
  .sidebar-toggle {
    display: none !important;
  }
}
@media (max-width: 767px) {
  .sidebar-toggle {
    display: none !important;
  }
}
.sidebar-toggle-line {
  position: relative;
  display: inline-block;
  vertical-align: top;
  height: 2px;
  width: 100%;
  background: #fff;
  margin-top: 3px;
}
.sidebar-toggle-line:first-child {
  margin-top: 0;
}
.site-author-image {
  display: block;
  margin: 0 auto;
  padding: 2px;
  max-width: 120px;
  height: auto;
  border: 1px solid #eee;
  border-radius: 50%;
  transition: 2s all;
}
.site-author-image:hover {
  -webkit-transform: rotate(360deg);
  -moz-transform: rotate(360deg);
  -ms-transform: rotate(360deg);
  -o-transform: rotate(360deg);
  transform: rotate(360deg);
}
.site-author-name {
  margin: 0;
  text-align: center;
  color: #222;
  font-weight: 600;
}
.site-description {
  margin-top: 0;
  text-align: center;
  font-size: 13px;
  color: #999;
}
.site-state {
  overflow: hidden;
  line-height: 1.4;
  white-space: nowrap;
  text-align: center;
}
.site-state-item {
  display: inline-block;
  padding: 0 15px;
  border-left: 1px solid #eee;
}
.site-state-item:first-child {
  border-left: none;
}
.site-state-item a {
  border-bottom: none;
}
.site-state-item-count {
  display: block;
  text-align: center;
  color: inherit;
  font-weight: 600;
  font-size: 16px;
}
.site-state-item-name {
  font-size: 13px;
  color: #999;
}
.feed-link {
  margin-top: 20px;
}
.feed-link a {
  display: inline-block;
  padding: 0 15px;
  color: #fc6423;
  border: 1px solid #fc6423;
  border-radius: 4px;
}
.feed-link a i {
  color: #fc6423;
  font-size: 14px;
}
.feed-link a:hover {
  color: #fff;
  background: #fc6423;
}
.feed-link a:hover i {
  color: #fff;
}
.links-of-author {
  margin-top: 20px;
}
.links-of-author a {
  display: inline-block;
  vertical-align: middle;
  margin-right: 10px;
  margin-bottom: 10px;
  border-bottom-color: #555;
  font-size: 13px;
}
.links-of-author a:before {
  display: inline-block;
  vertical-align: middle;
  margin-right: 3px;
  content: " ";
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: #0b42c9;
}
.links-of-blogroll {
  font-size: 13px;
}
.links-of-blogroll-title {
  margin-top: 20px;
  font-size: 14px;
  font-weight: 600;
}
.links-of-blogroll-list {
  margin: 0;
  padding: 0;
  list-style: none;
}
.links-of-blogroll-item {
  padding: 2px 10px;
}
.links-of-blogroll-item a {
  max-width: 280px;
  box-sizing: border-box;
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.sidebar-nav {
  margin: 0 0 20px;
  padding-left: 0;
}
.sidebar-nav li {
  display: inline-block;
  cursor: pointer;
  border-bottom: 1px solid transparent;
  font-size: 14px;
  color: #555;
}
.sidebar-nav li:hover {
  color: #fc6423;
}
.page-post-detail .sidebar-nav-toc {
  padding: 0 5px;
}
.page-post-detail .sidebar-nav-overview {
  margin-left: 10px;
}
.sidebar-nav .sidebar-nav-active {
  color: #fc6423;
  border-bottom-color: #fc6423;
}
.sidebar-nav .sidebar-nav-active:hover {
  color: #fc6423;
}
.sidebar-panel {
  display: none;
}
.sidebar-panel-active {
  display: block;
}
.post-toc-empty {
  font-size: 14px;
  color: #666;
}
.post-toc-wrap {
  overflow: hidden;
}
.post-toc {
  overflow: auto;
}
.post-toc ol {
  margin: 0;
  padding: 0 2px 5px 10px;
  text-align: left;
  list-style: none;
  font-size: 14px;
}
.post-toc ol > ol {
  padding-left: 0;
}
.post-toc ol a {
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  transition-property: all;
  color: #666;
  border-bottom-color: #ccc;
}
.post-toc ol a:hover {
  color: #000;
  border-bottom-color: #000;
}
.post-toc .nav-item {
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: justify;
  white-space: nowrap;
  line-height: 1.8;
}
.post-toc .nav .nav-child {
  display: none;
}
.post-toc .nav .active > .nav-child {
  display: block;
}
.post-toc .nav .active-current > .nav-child {
  display: block;
}
.post-toc .nav .active-current > .nav-child > .nav-item {
  display: block;
}
.post-toc .nav .active > a {
  color: #fc6423;
  border-bottom-color: #fc6423;
}
.post-toc .nav .active-current > a {
  color: #fc6423;
}
.post-toc .nav .active-current > a:hover {
  color: #fc6423;
}
.footer {
  font-size: 14px;
  color: #999;
}
.footer img {
  border: none;
}
.footer-inner {
  text-align: center;
}
.with-love {
  display: inline-block;
  margin: 0 5px;
}
.powered-by,
.theme-info {
  display: inline-block;
}
.cc-license {
  margin-top: 10px;
  text-align: center;
}
.cc-license .cc-opacity {
  opacity: 0.7;
  border-bottom: none;
}
.cc-license .cc-opacity:hover {
  opacity: 0.9;
}
.cc-license img {
  display: inline-block;
}
.theme-next #ds-thread #ds-reset {
  color: #555;
}
.theme-next #ds-thread #ds-reset .ds-replybox {
  margin-bottom: 30px;
}
.theme-next #ds-thread #ds-reset .ds-replybox .ds-avatar,
.theme-next #ds-reset .ds-avatar img {
  box-shadow: none;
}
.theme-next #ds-thread #ds-reset .ds-textarea-wrapper {
  border-color: #c7d4e1;
  background: none;
  border-top-right-radius: 3px;
  border-top-left-radius: 3px;
}
.theme-next #ds-thread #ds-reset .ds-textarea-wrapper textarea {
  height: 60px;
}
.theme-next #ds-reset .ds-rounded-top {
  border-radius: 0;
}
.theme-next #ds-thread #ds-reset .ds-post-toolbar {
  box-sizing: border-box;
  border: 1px solid #c7d4e1;
  background: #f6f8fa;
}
.theme-next #ds-thread #ds-reset .ds-post-options {
  height: 40px;
  border: none;
  background: none;
}
.theme-next #ds-thread #ds-reset .ds-toolbar-buttons {
  top: 11px;
}
.theme-next #ds-thread #ds-reset .ds-sync {
  top: 5px;
}
.theme-next #ds-thread #ds-reset .ds-post-button {
  top: 4px;
  right: 5px;
  width: 90px;
  height: 30px;
  border: 1px solid #c5ced7;
  border-radius: 3px;
  background-image: linear-gradient(#fbfbfc, #f5f7f9);
  color: #60676d;
}
.theme-next #ds-thread #ds-reset .ds-post-button:hover {
  background-position: 0 -30px;
  color: #60676d;
}
.theme-next #ds-thread #ds-reset .ds-comments-info {
  padding: 10px 0;
}
.theme-next #ds-thread #ds-reset .ds-sort {
  display: none;
}
.theme-next #ds-thread #ds-reset li.ds-tab a.ds-current {
  border: none;
  background: #f6f8fa;
  color: #60676d;
}
.theme-next #ds-thread #ds-reset li.ds-tab a.ds-current:hover {
  background-color: #e9f0f7;
  color: #60676d;
}
.theme-next #ds-thread #ds-reset li.ds-tab a {
  border-radius: 2px;
  padding: 5px;
}
.theme-next #ds-thread #ds-reset .ds-login-buttons p {
  color: #999;
  line-height: 36px;
}
.theme-next #ds-thread #ds-reset .ds-login-buttons .ds-service-list li {
  height: 28px;
}
.theme-next #ds-thread #ds-reset .ds-service-list a {
  background: none;
  padding: 5px;
  border: 1px solid;
  border-radius: 3px;
  text-align: center;
}
.theme-next #ds-thread #ds-reset .ds-service-list a:hover {
  color: #fff;
  background: #666;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-weibo {
  color: #fc9b00;
  border-color: #fc9b00;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-weibo:hover {
  background: #fc9b00;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-qq {
  color: #60a3ec;
  border-color: #60a3ec;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-qq:hover {
  background: #60a3ec;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-renren {
  color: #2e7ac4;
  border-color: #2e7ac4;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-renren:hover {
  background: #2e7ac4;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-douban {
  color: #37994c;
  border-color: #37994c;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-douban:hover {
  background: #37994c;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-kaixin {
  color: #fef20d;
  border-color: #fef20d;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-kaixin:hover {
  background: #fef20d;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-netease {
  color: #f00;
  border-color: #f00;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-netease:hover {
  background: #f00;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-sohu {
  color: #ffcb05;
  border-color: #ffcb05;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-sohu:hover {
  background: #ffcb05;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-baidu {
  color: #2831e0;
  border-color: #2831e0;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-baidu:hover {
  background: #2831e0;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-google {
  color: #166bec;
  border-color: #166bec;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-google:hover {
  background: #166bec;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-weixin {
  color: #00ce0d;
  border-color: #00ce0d;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-weixin:hover {
  background: #00ce0d;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-more-services {
  border: none;
}
.theme-next #ds-thread #ds-reset .ds-service-list .ds-more-services:hover {
  background: none;
}
.theme-next #ds-reset .duoshuo-ua-admin {
  display: inline-block;
  color: #f00;
}
.theme-next #ds-reset .duoshuo-ua-platform,
.theme-next #ds-reset .duoshuo-ua-browser {
  color: #ccc;
}
.theme-next #ds-reset .duoshuo-ua-platform .fa,
.theme-next #ds-reset .duoshuo-ua-browser .fa {
  display: inline-block;
  margin-right: 3px;
}
.theme-next #ds-reset .duoshuo-ua-separator {
  display: inline-block;
  margin-left: 5px;
}
.theme-next .this_ua {
  background-color: #ccc !important;
  border-radius: 4px;
  padding: 0 5px !important;
  margin: 1px 1px !important;
  border: 1px solid #bbb !important;
  color: #fff;
  display: inline-block !important;
}
.theme-next .this_ua.admin {
  background-color: #d9534f !important;
  border-color: #d9534f !important;
}
.theme-next .this_ua.platform.iOS,
.theme-next .this_ua.platform.Mac,
.theme-next .this_ua.platform.Windows {
  background-color: #39b3d7 !important;
  border-color: #46b8da !important;
}
.theme-next .this_ua.platform.Linux {
  background-color: #3a3a3a !important;
  border-color: #1f1f1f !important;
}
.theme-next .this_ua.platform.Android {
  background-color: #00c47d !important;
  border-color: #01b171 !important;
}
.theme-next .this_ua.browser.Mobile,
.theme-next .this_ua.browser.Chrome {
  background-color: #5cb85c !important;
  border-color: #4cae4c !important;
}
.theme-next .this_ua.browser.Firefox {
  background-color: #f0ad4e !important;
  border-color: #eea236 !important;
}
.theme-next .this_ua.browser.Maxthon,
.theme-next .this_ua.browser.IE {
  background-color: #428bca !important;
  border-color: #357ebd !important;
}
.theme-next .this_ua.browser.baidu,
.theme-next .this_ua.browser.UCBrowser,
.theme-next .this_ua.browser.Opera {
  background-color: #d9534f !important;
  border-color: #d43f3a !important;
}
.theme-next .this_ua.browser.Android,
.theme-next .this_ua.browser.QQBrowser {
  background-color: #78ace9 !important;
  border-color: #4cae4c !important;
}
.post-spread {
  margin-top: 20px;
  text-align: center;
}
.jiathis_style {
  display: inline-block;
}
.jiathis_style a {
  border: none;
}
.fa {
  font-family: FontAwesome !important;
}
.post-spread {
  margin-top: 20px;
  text-align: center;
}
.bdshare-slide-button-box a {
  border: none;
}
.bdsharebuttonbox {
  display: inline-block;
}
.bdsharebuttonbox a {
  border: none;
}
.local-search-pop-overlay {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 2080;
  background-color: rgba(0,0,0,0.3);
}
.local-search-popup {
  display: none;
  position: fixed;
  top: 10%;
  left: 50%;
  margin-left: -350px;
  width: 700px;
  height: 80%;
  padding: 0;
  background: #fff;
  color: #333;
  z-index: 9999;
  border-radius: 5px;
}
@media (max-width: 767px) {
  .local-search-popup {
    padding: 0;
    top: 0;
    left: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    border-radius: 0;
  }
}
.local-search-popup ul.search-result-list {
  padding: 0;
  margin: 0 5px;
}
.local-search-popup p.search-result {
  border-bottom: 1px dashed #ccc;
  padding: 5px 0;
}
.local-search-popup a.search-result-title {
  font-weight: bold;
  font-size: 16px;
}
.local-search-popup .search-keyword {
  border-bottom: 1px dashed #f00;
  font-weight: bold;
  color: #f00;
}
.local-search-popup .local-search-header {
  padding: 5px;
  height: 36px;
  background: #f5f5f5;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.local-search-popup #local-search-result {
  overflow: auto;
  position: relative;
  padding: 5px 25px;
  height: calc(100% - 55px);
}
.local-search-popup .local-search-input-wrapper {
  display: inline-block;
  width: calc(100% - 90px);
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
}
.local-search-popup .local-search-input-wrapper input {
  padding: 8px 0;
  height: 20px;
  display: block;
  width: 100%;
  outline: none;
  border: none;
  background: transparent;
  vertical-align: middle;
}
.local-search-popup .search-icon,
.local-search-popup .popup-btn-close {
  display: inline-block;
  font-size: 18px;
  color: #999;
  height: 36px;
  width: 18px;
  padding-left: 10px;
  padding-right: 10px;
}
.local-search-popup .search-icon {
  float: left;
}
.local-search-popup .popup-btn-close {
  border-left: 1px solid #eee;
  float: right;
  cursor: pointer;
}
.local-search-popup #no-result {
  position: absolute;
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  -moz-transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  -o-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
  color: #ccc;
}
.site-uv,
.site-pv,
.page-pv {
  display: inline-block;
}
.site-uv .busuanzi-value,
.site-pv .busuanzi-value,
.page-pv .busuanzi-value {
  margin: 0 5px;
}
.site-uv {
  margin-right: 10px;
}
.site-uv::after {
  content: "|";
  padding-left: 10px;
}
#needsharebutton-postbottom {
  position: relative;
  cursor: pointer;
  height: 26px;
}
#needsharebutton-postbottom .btn {
  display: initial;
  padding: 1px 4px;
  border: 1px solid #555;
  border-radius: 3px;
}
#needsharebutton-float {
  position: fixed;
  bottom: 38px;
  left: -8px;
  z-index: 9999;
  cursor: pointer;
}
#needsharebutton-float .btn {
  padding: 0 10px 0 14px;
  border: 1px solid #555;
  border-radius: 4px;
}
.page-archive .archive-page-counter {
  position: relative;
  top: 3px;
  left: 20px;
}
@media (max-width: 767px) {
  .page-archive .archive-page-counter {
    top: 5px;
  }
}
.page-archive .posts-collapse .archive-move-on {
  position: absolute;
  top: 11px;
  left: 0;
  margin-left: -6px;
  width: 10px;
  height: 10px;
  opacity: 0.5;
  background: #555;
  border: 1px solid #fff;
  border-radius: 50%;
}
.category-all-page .category-all-title {
  text-align: center;
}
.category-all-page .category-all {
  margin-top: 20px;
}
.category-all-page .category-list {
  margin: 0;
  padding: 0;
  list-style: none;
}
.category-all-page .category-list-item {
  margin: 5px 10px;
}
.category-all-page .category-list-count {
  color: #bbb;
}
.category-all-page .category-list-count:before {
  display: inline;
  content: " (";
}
.category-all-page .category-list-count:after {
  display: inline;
  content: ") ";
}
.category-all-page .category-list-child {
  padding-left: 10px;
}
#schedule ul#event-list {
  padding-left: 30px;
}
#schedule ul#event-list hr {
  margin: 20px 0 45px 0 !important;
  background: #222;
}
#schedule ul#event-list hr:after {
  display: inline-block;
  content: 'NOW';
  background: #222;
  color: #fff;
  font-weight: bold;
  text-align: right;
  padding: 0 5px;
}
#schedule ul#event-list li.event {
  margin: 20px 0px;
  background: #f9f9f9;
  padding-left: 10px;
  min-height: 40px;
}
#schedule ul#event-list li.event h2.event-summary {
  margin: 0;
  padding-bottom: 3px;
}
#schedule ul#event-list li.event h2.event-summary:before {
  display: inline-block;
  font-family: FontAwesome;
  font-size: 8px;
  content: '\f111';
  vertical-align: middle;
  margin-right: 25px;
  color: #bbb;
}
#schedule ul#event-list li.event span.event-relative-time {
  display: inline-block;
  font-size: 12px;
  font-weight: 400;
  padding-left: 12px;
  color: #bbb;
}
#schedule ul#event-list li.event span.event-details {
  display: block;
  color: #bbb;
  margin-left: 56px;
  padding-top: 3px;
  padding-bottom: 6px;
  text-indent: -24px;
  line-height: 18px;
}
#schedule ul#event-list li.event span.event-details:before {
  text-indent: 0;
  display: inline-block;
  width: 14px;
  font-family: FontAwesome;
  text-align: center;
  margin-right: 9px;
  color: #bbb;
}
#schedule ul#event-list li.event span.event-details.event-location:before {
  content: '\f041';
}
#schedule ul#event-list li.event span.event-details.event-duration:before {
  content: '\f017';
}
#schedule ul#event-list li.event-past {
  background: #fcfcfc;
}
#schedule ul#event-list li.event-past > * {
  opacity: 0.6;
}
#schedule ul#event-list li.event-past h2.event-summary {
  color: #bbb;
}
#schedule ul#event-list li.event-past h2.event-summary:before {
  color: #dfdfdf;
}
#schedule ul#event-list li.event-now {
  background: #222;
  color: #fff;
  padding: 15px 0 15px 10px;
}
#schedule ul#event-list li.event-now h2.event-summary:before {
  -webkit-transform: scale(1.2);
  -moz-transform: scale(1.2);
  -ms-transform: scale(1.2);
  -o-transform: scale(1.2);
  transform: scale(1.2);
  color: #fff;
  animation: dot-flash 1s alternate infinite ease-in-out;
}
#schedule ul#event-list li.event-now * {
  color: #fff !important;
}
@-moz-keyframes dot-flash {
  from {
    opacity: 1;
    -webkit-transform: scale(1.1);
    -moz-transform: scale(1.1);
    -ms-transform: scale(1.1);
    -o-transform: scale(1.1);
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    -o-transform: scale(1);
    transform: scale(1);
  }
}
@-webkit-keyframes dot-flash {
  from {
    opacity: 1;
    -webkit-transform: scale(1.1);
    -moz-transform: scale(1.1);
    -ms-transform: scale(1.1);
    -o-transform: scale(1.1);
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    -o-transform: scale(1);
    transform: scale(1);
  }
}
@-o-keyframes dot-flash {
  from {
    opacity: 1;
    -webkit-transform: scale(1.1);
    -moz-transform: scale(1.1);
    -ms-transform: scale(1.1);
    -o-transform: scale(1.1);
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    -o-transform: scale(1);
    transform: scale(1);
  }
}
@keyframes dot-flash {
  from {
    opacity: 1;
    -webkit-transform: scale(1.1);
    -moz-transform: scale(1.1);
    -ms-transform: scale(1.1);
    -o-transform: scale(1.1);
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    -o-transform: scale(1);
    transform: scale(1);
  }
}
.page-post-detail .sidebar-toggle-line {
  background: #fc6423;
}
.page-post-detail .comments {
  overflow: hidden;
}
.header {
  position: relative;
  margin: 0 auto;
  width: 75%;
}
@media (min-width: 768px) and (max-width: 991px) {
  .header {
    width: auto;
  }
}
@media (max-width: 767px) {
  .header {
    width: auto;
  }
}
.header-inner {
  position: absolute;
  top: 0;
  overflow: hidden;
  padding: 0;
  width: 240px;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12);
  border-radius: initial;
}
@media (min-width: 1600px) {
  .container .header-inner {
    width: 240px;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .header-inner {
    position: relative;
    width: auto;
    border-radius: initial;
  }
}
@media (max-width: 767px) {
  .header-inner {
    position: relative;
    width: auto;
    border-radius: initial;
  }
}
.main:before,
.main:after {
  content: " ";
  display: table;
}
.main:after {
  clear: both;
}
@media (min-width: 768px) and (max-width: 991px) {
  .main {
    padding-bottom: 100px;
  }
}
@media (max-width: 767px) {
  .main {
    padding-bottom: 100px;
  }
}
.container .main-inner {
  width: 75%;
}
@media (min-width: 768px) and (max-width: 991px) {
  .container .main-inner {
    width: auto;
  }
}
@media (max-width: 767px) {
  .container .main-inner {
    width: auto;
  }
}
.content-wrap {
  float: right;
  box-sizing: border-box;
  padding: 40px;
  width: calc(100% - 252px);
  background: #fff;
  min-height: 700px;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12);
  border-radius: initial;
}
@media (min-width: 768px) and (max-width: 991px) {
  .content-wrap {
    width: 100%;
    padding: 20px;
    border-radius: initial;
  }
}
@media (max-width: 767px) {
  .content-wrap {
    width: 100%;
    padding: 20px;
    min-height: auto;
    border-radius: initial;
  }
}
.sidebar {
  position: static;
  float: left;
  margin-top: 300px;
  width: 240px;
  background: #eee;
  box-shadow: none;
}
@media (min-width: 768px) and (max-width: 991px) {
  .sidebar {
    display: none;
  }
}
@media (max-width: 767px) {
  .sidebar {
    display: none;
  }
}
.sidebar-toggle {
  display: none;
}
.footer-inner {
  width: 75%;
  padding-left: 260px;
}
@media (min-width: 768px) and (max-width: 991px) {
  .footer-inner {
    width: auto;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
}
@media (max-width: 767px) {
  .footer-inner {
    width: auto;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
}
.sidebar-position-right .header-inner {
  right: 0;
}
.sidebar-position-right .content-wrap {
  float: left;
}
.sidebar-position-right .sidebar {
  float: right;
}
.sidebar-position-right .footer-inner {
  padding-left: 0;
  padding-right: 260px;
}
.site-brand-wrapper {
  position: relative;
}
.site-meta {
  padding: 20px 0;
  color: #fff;
  background: #222;
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-meta {
    box-shadow: 0 0 16px rgba(0,0,0,0.5);
  }
}
@media (max-width: 767px) {
  .site-meta {
    box-shadow: 0 0 16px rgba(0,0,0,0.5);
  }
}
.brand {
  padding: 0;
  background: none;
}
.brand:hover {
  color: #fff;
}
.site-subtitle {
  margin: 10px 10px 0;
  font-weight: initial;
}
.site-search form {
  display: none;
}
.site-nav {
  border-top: none;
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav {
    display: none !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav-on {
    display: block !important;
  }
}
.menu .menu-item {
  display: block;
  margin: 0;
}
.menu .menu-item a {
  position: relative;
  box-sizing: border-box;
  padding: 5px 20px;
  text-align: left;
  line-height: inherit;
  transition-property: background-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.menu .menu-item a:hover,
.menu-item-active a {
  background: #f9f9f9;
  border-bottom-color: #fff;
}
.menu .menu-item br {
  display: none;
}
.menu-item-active a:after {
  content: " ";
  position: absolute;
  top: 50%;
  margin-top: -3px;
  right: 15px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: #bbb;
}
.btn-bar {
  background-color: #fff;
}
.site-nav-toggle {
  left: 20px;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -webkit-transform: translateY(-50%);
  -moz-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  -o-transform: translateY(-50%);
  transform: translateY(-50%);
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav-toggle {
    display: block;
  }
}
.use-motion .sidebar .motion-element {
  opacity: 1;
}
.sidebar {
  margin-left: -100%;
  right: auto;
  bottom: auto;
  -webkit-transform: none;
}
.sidebar-inner {
  box-sizing: border-box;
  width: 240px;
  color: #555;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
  opacity: 0;
}
.sidebar-inner.affix {
  position: fixed;
  top: 12px;
}
.sidebar-inner.affix-bottom {
  position: absolute;
}
.site-overview {
  text-align: left;
}
.site-author:before,
.site-author:after {
  content: " ";
  display: table;
}
.site-author:after {
  clear: both;
}
.sidebar a {
  color: #555;
}
.sidebar a:hover {
  color: #222;
}
.site-state-item {
  padding: 0 10px;
}
.links-of-author-item a:before {
  display: none;
}
.links-of-author-item a {
  border-bottom: none;
  text-decoration: underline;
}
.feed-link {
  border-top: 1px dotted #ccc;
  border-bottom: 1px dotted #ccc;
  text-align: center;
}
.feed-link a {
  display: block;
  color: #fc6423;
  border: none;
}
.feed-link a:hover {
  background: none;
  color: #e34603;
}
.feed-link a:hover i {
  color: #e34603;
}
.links-of-author {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
.links-of-author-item {
  margin: 5px 0 0;
  width: 50%;
}
.links-of-author-item a {
  max-width: 216px;
  box-sizing: border-box;
  display: inline-block;
  margin-right: 0;
  margin-bottom: 0;
  padding: 0 5px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.links-of-author-item a {
  display: block;
  text-decoration: none;
}
.links-of-author-item a:hover {
  border-radius: 4px;
  background: #eee;
}
.links-of-author-item .fa {
  margin-right: 2px;
  font-size: 16px;
}
.links-of-author-item .fa-globe {
  font-size: 15px;
}
.links-of-blogroll {
  text-align: center;
  margin-top: 20px;
  padding: 3px 0 0;
  border-top: 1px dotted #ccc;
}
.links-of-blogroll-title {
  margin-top: 0;
}
.links-of-blogroll-item {
  padding: 0;
}
.links-of-blogroll-inline:before,
.links-of-blogroll-inline:after {
  content: " ";
  display: table;
}
.links-of-blogroll-inline:after {
  clear: both;
}
.links-of-blogroll-inline .links-of-blogroll-item {
  margin: 5px 0 0;
  width: 50%;
  display: inline-block;
  width: unset;
}
.links-of-blogroll-inline .links-of-blogroll-item a {
  max-width: 216px;
  box-sizing: border-box;
  display: inline-block;
  margin-right: 0;
  margin-bottom: 0;
  padding: 0 5px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.content-wrap {
  padding: initial;
  background: initial;
  box-shadow: initial;
  border-radius: initial;
}
.post-block {
  padding: 40px;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12);
  border-radius: initial;
}
#posts > article + article .post-block {
  margin-top: 12px;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
}
.comments {
  padding: 40px;
  margin: initial;
  margin-top: 12px;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
}
.posts-expand {
  padding-top: initial;
}
.post-nav-divider {
  width: 4%;
}
.post-nav-item {
  width: 48%;
}
.post-eof,
.post-spread {
  display: none !important;
}
.pagination {
  margin: 12px 0 0;
  border-top: initial;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
  padding: 10px 0 10px;
}
.pagination .prev,
.pagination .next,
.pagination .page-number {
  margin-bottom: initial;
  top: initial;
}
.main {
  padding-bottom: initial;
}
.footer {
  bottom: auto;
}
.post-header h1,
.post-header h2 {
  margin: initial;
}
.posts-expand .post-title-link {
  line-height: inherit;
}
.posts-expand .post-title {
  font-size: 1.7em;
}
.post-body h1 {
  font-size: 1.6em;
  border-bottom: 1px solid #eee;
}
.post-body h2 {
  font-size: 1.45em;
  border-bottom: 1px solid #eee;
}
.post-body h3 {
  font-size: 1.3em;
  border-bottom: 1px dotted #eee;
}
.post-body h4 {
  font-size: 1.2em;
}
.post-body h5 {
  font-size: 1.07em;
}
.post-body h6 {
  font-size: 1.03em;
}
@media (min-width: 768px) and (max-width: 991px) {
  .content-wrap {
    padding: 10px;
  }
  .posts-expand {
    margin: initial;
  }
  .posts-expand .post-button {
    margin-top: 20px;
  }
  .post-block {
    padding: 20px;
    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
    border-radius: initial;
  }
  #posts > article + article .post-block {
    margin-top: 10px;
  }
  .comments {
    margin-top: 10px;
    padding: 10px 20px;
  }
  .pagination {
    margin: 10px 0 0;
  }
}
@media (max-width: 767px) {
  .content-wrap {
    padding: 8px;
  }
  .posts-expand {
    margin: initial;
  }
  .posts-expand .post-button {
    margin-top: 12px;
  }
  .posts-expand img {
    padding: initial !important;
  }
  .post-block {
    padding: 12px;
    min-height: auto;
    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
    border-radius: initial;
  }
  #posts > article + article .post-block {
    margin-top: 8px;
  }
  .comments {
    margin-top: 8px;
    padding: 0 12px;
  }
  .pagination {
    margin: 8px 0 0;
  }
}
:active {
  cursor: url("http://om8u46rmb.bkt.clouddn.com/sword1.ico"), auto !important;
}
body {
  background-image: url("https://s2.ax1x.com/2019/06/21/ZSfAtH.png");
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: 50% 50%;
  background-size: cover;
}
.content-wrap,
.sidebar {
  opacity: 0.85 !important;
}
.header-inner {
  background: rgba(255,255,255,0.7) !important;
}</style></head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <!--githubͼ��-->
	<a href="https://github.com/51461" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">菜鸡不配听歌</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">菜鸡51461的博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/blog/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/blog/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            日程表
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/blog/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            站点地图
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://51461.github.io/blog/blog/2019/06/24/redis/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ボ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/20190616154611.jpg">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="菜鸡不配听歌">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Redis</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-24T18:39:31+08:00">
                2019-06-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/redis/" itemprop="url" rel="index">
                    <span itemprop="name">redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blog/2019/06/24/redis/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/blog/2019/06/24/redis/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量 <i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计:</span>
                
                <span title="字数统计">
                  5.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 ≈</span>
                
                <span title="阅读时长">
                  23
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Redis介绍"><a href="#Redis介绍" class="headerlink" title="Redis介绍"></a>Redis介绍</h2><p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 <a href="#strings"><strong>字符串（strings）</strong></a>， <a href="#hashes"><strong>散列（hashes）</strong></a>， <a href="#lists"><strong>列表（lists）</strong></a>， <a href="#sets"><strong>集合（sets）</strong></a>， <a href="#sorted-sets"><strong>有序集合（sorted sets</strong>）</a> 与范围查询， <a href="#bitmaps">bitmaps</a>， <a href="#hyperloglogs">hyperloglogs</a> 和 <a href="http://www.redis.cn/commands/geoadd.html" target="_blank" rel="noopener">地理空间（geospatial）</a> 索引半径查询。 Redis 内置了 <a href="http://www.redis.cn/topics/replication.html" target="_blank" rel="noopener">复制（replication）</a>，<a href="http://www.redis.cn/commands/eval.html" target="_blank" rel="noopener">LUA脚本（Lua scripting）</a>， <a href="http://www.redis.cn/topics/lru-cache.html" target="_blank" rel="noopener">LRU驱动事件（LRU eviction）</a>，<a href="http://www.redis.cn/topics/transactions.html" target="_blank" rel="noopener">事务（transactions）</a> 和不同级别的 <a href="http://www.redis.cn/topics/persistence.html" target="_blank" rel="noopener">磁盘持久化（persistence）</a>， 并通过 <a href="http://www.redis.cn/topics/sentinel.html" target="_blank" rel="noopener">Redis哨兵（Sentinel）</a>和自动 <a href="http://www.redis.cn/topics/cluster-tutorial.html" target="_blank" rel="noopener">分区（Cluster）</a>提供高可用性（high availability）。</p>
<h2 id="Redis性能"><a href="#Redis性能" class="headerlink" title="Redis性能"></a>Redis性能</h2><p><strong>读:11.2万/秒</strong><br><strong>写:8.6万/秒</strong><br><strong>平均: 10万/秒 吞吐量</strong></p>
<h2 id="Redis安装和使用"><a href="#Redis安装和使用" class="headerlink" title="Redis安装和使用"></a>Redis安装和使用</h2><h3 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h3><p><strong>要求:命令的执行值redis的根目录中运行.</strong></p>
<p><strong>命令:</strong><br>​    <strong>1.make    表示编译文件</strong><br>​    <strong>2.make install  表示安装redis服务.</strong></p>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p><strong>vim redis.conf</strong></p>
<h4 id="去除IP绑定"><a href="#去除IP绑定" class="headerlink" title="去除IP绑定"></a>去除IP绑定</h4><p><strong>#bind 127.0.0.1（69行左右）</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAtNhq.png" alt=""></p>
<h4 id="关闭保护模式"><a href="#关闭保护模式" class="headerlink" title="关闭保护模式"></a>关闭保护模式</h4><p><strong>protected-mode no(88行左右)</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAtd3V.png" alt=""></p>
<h4 id="开启后台启动"><a href="#开启后台启动" class="headerlink" title="开启后台启动"></a>开启后台启动</h4><p><strong>daemonize yes(136行左右)</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAt7Ed.png" alt=""></p>
<h3 id="VIM常见报错"><a href="#VIM常见报错" class="headerlink" title="VIM常见报错"></a>VIM常见报错</h3><p><strong>报错演示：</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAUZWt.png" alt=""></p>
<p><strong>报错原因:在vim编辑状态下.程序异常外退出导致Linux程序启动保护模式.导致异常.</strong></p>
<p><strong>解决方案:</strong><br><strong>1. 根据选项  点击 D</strong><br><strong>2. 利用删除指令 直接删除临时文件 <code>rm –rf .xxxxxx.swap</code></strong></p>
<h3 id="Redis运行命令"><a href="#Redis运行命令" class="headerlink" title="Redis运行命令"></a>Redis运行命令</h3><h4 id="启动命令"><a href="#启动命令" class="headerlink" title="启动命令"></a>启动命令</h4><p><strong>Redis-server 忽略         一切加载都是默认项</strong><br><strong>Redis-server redis.conf  目的读取配置文件</strong></p>
<h4 id="进入客户端"><a href="#进入客户端" class="headerlink" title="进入客户端"></a>进入客户端</h4><p><strong>redis-cli –p  6379(端口号)</strong><br><strong>exit     退出客户端</strong><br><strong>ctrl + c 退出</strong><br><strong>简化:如果Redis默认的端口号为6379则命令可以简化</strong><br><strong>redis-cli</strong></p>
<h4 id="Redis关闭"><a href="#Redis关闭" class="headerlink" title="Redis关闭"></a>Redis关闭</h4><p><strong>redis-cli –p 6379（端口号） shutdown</strong><br><strong>kill -9 PID PID2</strong><br><strong>redis-cli shutdown  简化命令</strong></p>
<h2 id="Redis入门案例"><a href="#Redis入门案例" class="headerlink" title="Redis入门案例"></a>Redis入门案例</h2><h3 id="linux防火墙操作密令"><a href="#linux防火墙操作密令" class="headerlink" title="linux防火墙操作密令"></a>linux防火墙操作密令</h3><p><strong>连接虚拟机Redis要确保虚拟机防火墙关闭</strong><br><strong>1 关闭防火墙—–service iptables stop<br>2 启动防火墙—–service iptables start<br>3 重启防火墙—–service iptables restart<br>4 查看防火墙状态——service iptables status<br>5 永久关闭防火墙——chkconfig iptables off<br>6 永久关闭后启用——chkconfig iptables on</strong></p>
<h3 id="添加jar包文件"><a href="#添加jar包文件" class="headerlink" title="添加jar包文件"></a>添加jar包文件</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- jedis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>${jedis.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--添加spring-datajar包  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="入门案例——String"><a href="#入门案例——String" class="headerlink" title="入门案例——String"></a>入门案例——String</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 连接单台redis  </span></span><br><span class="line"><span class="comment"> * 参数介绍:</span></span><br><span class="line"><span class="comment"> * 	redisIP地址.</span></span><br><span class="line"><span class="comment"> *  redis:6379</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>{</span><br><span class="line">	Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"192.168.126.166"</span>,<span class="number">6379</span>);</span><br><span class="line">	jedis.set(<span class="string">"redis"</span>, <span class="string">"redis入门案例"</span>);</span><br><span class="line">	System.out.println(<span class="string">"获取redis中的数据:"</span>+jedis.get(<span class="string">"redis"</span>));</span><br><span class="line">	<span class="comment">//为数据设定超时时间  单位秒</span></span><br><span class="line">	jedis.setex(<span class="string">"1804"</span>, <span class="number">100</span>, <span class="string">"1804班"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="入门案例——hash"><a href="#入门案例——hash" class="headerlink" title="入门案例——hash"></a>入门案例——hash</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>{</span><br><span class="line">	Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"192.168.126.148"</span>, <span class="number">6379</span>);</span><br><span class="line">	jedis.hset(<span class="string">"user"</span>, <span class="string">"id"</span>, <span class="string">"1"</span>);</span><br><span class="line">	jedis.hset(<span class="string">"user"</span>, <span class="string">"name"</span>, <span class="string">"tomcat"</span>);</span><br><span class="line">	jedis.hset(<span class="string">"user"</span>, <span class="string">"age"</span>, <span class="string">"18"</span>);</span><br><span class="line">	System.out.println(<span class="string">"操作完成!!!"</span>+jedis.hget(<span class="string">"user"</span>, <span class="string">"id"</span>));</span><br><span class="line">	Map&lt;String,String&gt; map = jedis.hgetAll(<span class="string">"user"</span>);</span><br><span class="line">	System.out.println(map);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="入门案例——List"><a href="#入门案例——List" class="headerlink" title="入门案例——List"></a>入门案例——List</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>{</span><br><span class="line">	Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"192.168.126.148"</span>, <span class="number">6379</span>);</span><br><span class="line">	Long number = jedis.lpush(<span class="string">"list"</span>, <span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>);</span><br><span class="line">	System.out.println(<span class="string">"获取数据"</span>+number);</span><br><span class="line">	List&lt;String&gt; list= jedis.lrange(<span class="string">"list"</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">	System.out.println(<span class="string">"获取参数:"</span>+list);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SpringBoot整合Redis"><a href="#SpringBoot整合Redis" class="headerlink" title="SpringBoot整合Redis"></a>SpringBoot整合Redis</h3><h4 id="导入jar包"><a href="#导入jar包" class="headerlink" title="导入jar包"></a>导入jar包</h4><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--spring整合redis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//String类型操作方式   配置文件3处  防火墙</span></span><br><span class="line"><span class="comment">//IP:端口号</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testString</span><span class="params">()</span> </span>{</span><br><span class="line">	Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"192.168.175.129"</span>,<span class="number">6379</span>);</span><br><span class="line">	jedis.set(<span class="string">"1902"</span>,<span class="string">"1902班"</span>);</span><br><span class="line">	jedis.expire(<span class="string">"1902"</span>, <span class="number">10</span>);</span><br><span class="line">	System.out.println(jedis.get(<span class="string">"1902"</span>));	</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="超时时间定时"><a href="#超时时间定时" class="headerlink" title="超时时间定时"></a>超时时间定时</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设定数据的超时方法</span></span><br><span class="line"><span class="comment">//分布式锁!!!!!</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTimeOut</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</span><br><span class="line">	Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"192.168.175.129"</span>,<span class="number">6379</span>);</span><br><span class="line">	jedis.setex(<span class="string">"aa"</span>, <span class="number">2</span>, <span class="string">"aa"</span>);</span><br><span class="line">	System.out.println(jedis.get(<span class="string">"aa"</span>));</span><br><span class="line">	Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">	<span class="comment">//当key不存在时操作正常.当key存在时,则操作失败</span></span><br><span class="line">	Long result = jedis.setnx(<span class="string">"aa"</span>,<span class="string">"bb"</span>);</span><br><span class="line">	System.out.println(<span class="string">"获取输出数据:"</span>+result+<span class="string">":"</span>+jedis.get(<span class="string">"aa"</span>));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="对象转化JSON"><a href="#对象转化JSON" class="headerlink" title="对象转化JSON"></a>对象转化JSON</h4><h5 id="转化说明"><a href="#转化说明" class="headerlink" title="转化说明"></a>转化说明</h5><p><strong>利用ObjectMapper实现对象的转化.</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"><span class="comment">//对象转化为JSON</span></span><br><span class="line">String json串 = mapper.writeValueAsString(对象);</span><br><span class="line"><span class="comment">//JSON转化为对象</span></span><br><span class="line">对象  T =  mapper.readValue(json, 对象.class);</span><br></pre></td></tr></tbody></table></figure>

<h5 id="对象与JSON互转"><a href="#对象与JSON互转" class="headerlink" title="对象与JSON互转"></a>对象与JSON互转</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3.利用Redis保存业务数据  数据库</span></span><br><span class="line"><span class="comment"> *  数据库数据:  对象 Object</span></span><br><span class="line"><span class="comment"> *  String类型要求只能存储字符串类型</span></span><br><span class="line"><span class="comment"> *  item ~~~  JSON  ~~~ 字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">objectToJSON</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">	ItemDesc itemDesc = <span class="keyword">new</span> ItemDesc();</span><br><span class="line">	itemDesc.setItemId(<span class="number">1000L</span>)</span><br><span class="line">			.setItemDesc(<span class="string">"测试方法"</span>)</span><br><span class="line">			.setCreated(<span class="keyword">new</span> Date())</span><br><span class="line">			.setUpdated(<span class="keyword">new</span> Date());</span><br><span class="line">	ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">	<span class="comment">//转化JSON时必须 get/set方法</span></span><br><span class="line">	String json =mapper.writeValueAsString(itemDesc);</span><br><span class="line">	System.out.println(json);</span><br><span class="line">	<span class="comment">//将json串转化为对象</span></span><br><span class="line">	ItemDesc desc2 = mapper.readValue(json, ItemDesc.class);</span><br><span class="line">	System.out.println(<span class="string">"测试对象:"</span>+desc2);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="List与JSON互转"><a href="#List与JSON互转" class="headerlink" title="List与JSON互转"></a>List与JSON互转</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现List集合与JSON转化</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unused"</span>)</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listTOJSON</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>{</span><br><span class="line">	ItemDesc itemDesc1 = <span class="keyword">new</span> ItemDesc();</span><br><span class="line">	itemDesc1.setItemId(<span class="number">1000L</span>).setItemDesc(<span class="string">"测试方法"</span>);</span><br><span class="line">	ItemDesc itemDesc2 = <span class="keyword">new</span> ItemDesc();</span><br><span class="line">	itemDesc2.setItemId(<span class="number">1000L</span>).setItemDesc(<span class="string">"测试方法"</span>);</span><br><span class="line">	List&lt;ItemDesc&gt; list = <span class="keyword">new</span> ArrayList&lt;ItemDesc&gt;();</span><br><span class="line">	list.add(itemDesc1);</span><br><span class="line">	list.add(itemDesc2);</span><br><span class="line">	ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">	String json = mapper.writeValueAsString(list);</span><br><span class="line">	System.out.println(<span class="string">"集合转化为JSON"</span>+json);</span><br><span class="line">	<span class="comment">//将数据保存到redis中</span></span><br><span class="line">	Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"192.168.175.129"</span>,<span class="number">6379</span>);</span><br><span class="line">	jedis.set(<span class="string">"itemDescList"</span>, json);		</span><br><span class="line">	<span class="comment">//从redis中获取数据</span></span><br><span class="line">	String result = jedis.get(<span class="string">"itemDescList"</span>);</span><br><span class="line">	List&lt;ItemDesc&gt; descList = mapper.readValue(result,list.getClass());</span><br><span class="line">	System.out.println(descList);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="编辑pro文件"><a href="#编辑pro文件" class="headerlink" title="编辑pro文件"></a>编辑pro文件</h4><p><strong>jedis.host=192.168.175.129</strong><br><strong>jedis.port=6379</strong></p>
<h4 id="编辑配置类"><a href="#编辑配置类" class="headerlink" title="编辑配置类"></a>编辑配置类</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表示redis配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:/properties/redis.properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> </span>{</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"${jedis.host}"</span>)</span><br><span class="line">	<span class="keyword">private</span> String  host;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"${jedis.port}"</span>)</span><br><span class="line">	<span class="keyword">private</span> Integer port;</span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Jedis <span class="title">jedis</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Jedis(host, port);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="设定虚拟机静态IP"><a href="#设定虚拟机静态IP" class="headerlink" title="设定虚拟机静态IP"></a>设定虚拟机静态IP</h2><p><strong>检查当前IP</strong></p>
<p><strong>检查网关地址</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAdHL8.png" alt=""></p>
<p><strong>配置静态IP</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAdvJs.png" alt=""></p>
<h2 id="Redis分片机制"><a href="#Redis分片机制" class="headerlink" title="Redis分片机制"></a>Redis分片机制</h2><h3 id="Redis单台问题"><a href="#Redis单台问题" class="headerlink" title="Redis单台问题"></a>Redis单台问题</h3><p><strong>1. 使用redis单台时内存会明显不足.如果一味的扩容内存,则运行的效率低.</strong><br><strong>2. 如果redis单台服务器宕机.</strong></p>
<h3 id="Redis分片（分区）介绍"><a href="#Redis分片（分区）介绍" class="headerlink" title="Redis分片（分区）介绍"></a>Redis分片（分区）介绍</h3><p><strong>核心特点:实现了redis内存的扩容.</strong><br><strong>说明:使用多个redis节点,共同为用户提供服务.内存空间翻倍.</strong><br>​      <strong>用户使用时当做一个整体.并且内存保存的数据不一.</strong></p>
<h3 id="分片搭建"><a href="#分片搭建" class="headerlink" title="分片搭建"></a>分片搭建</h3><h4 id="创建新文件"><a href="#创建新文件" class="headerlink" title="创建新文件"></a>创建新文件</h4><p><strong>在Redis根目录下创建一个新的文件夹</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZA0RCd.png" alt=""></p>
<h4 id="复制配置文件"><a href="#复制配置文件" class="headerlink" title="复制配置文件"></a>复制配置文件</h4><p><strong>复制配置文件到新建的文件夹里</strong><br><strong>[root@localhost redis-5.0.4]# cp redis.conf shards/redis-6379.conf</strong><br><strong>[root@localhost redis-5.0.4]# cp redis.conf shards/redis-6380.conf</strong><br><strong>[root@localhost redis-5.0.4]# cp redis.conf shards/redis-6381.conf</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZA0jvq.png" alt=""></p>
<h4 id="修改端口号"><a href="#修改端口号" class="headerlink" title="修改端口号"></a>修改端口号</h4><p><strong>可以使用:/port快速定位数据</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZABKaD.png" alt=""><br><strong>将6380.conf中端口号改为6380.</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAB3RA.png" alt=""><br><strong>同理 修改其他配置文件</strong></p>
<h4 id="启动多台Redis"><a href="#启动多台Redis" class="headerlink" title="启动多台Redis"></a>启动多台Redis</h4><h5 id="启动Redis"><a href="#启动Redis" class="headerlink" title="启动Redis"></a>启动Redis</h5><p><strong>redis-server redis-6379.conf</strong><br><strong>redis-server redis-6380.conf</strong><br><strong>redis-server redis-6381.conf</strong></p>
<h5 id="检查redis服务"><a href="#检查redis服务" class="headerlink" title="检查redis服务"></a>检查redis服务</h5><p><strong>ps -ef | grep redis</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAB6s0.png" alt=""></p>
<h3 id="Redis分片测试"><a href="#Redis分片测试" class="headerlink" title="Redis分片测试"></a>Redis分片测试</h3><h4 id="入门案例-1"><a href="#入门案例-1" class="headerlink" title="入门案例"></a>入门案例</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 操作时需要将多台redis当做1台使用.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testShards</span><span class="params">()</span> </span>{</span><br><span class="line">	List&lt;JedisShardInfo&gt; shards = <span class="keyword">new</span> ArrayList&lt;JedisShardInfo&gt;();</span><br><span class="line">	JedisShardInfo info1 = <span class="keyword">new</span> JedisShardInfo(<span class="string">"192.168.175.129"</span>,<span class="number">6379</span>);</span><br><span class="line">	JedisShardInfo info2 = <span class="keyword">new</span> JedisShardInfo(<span class="string">"192.168.175.129"</span>,<span class="number">6380</span>);</span><br><span class="line">	JedisShardInfo info3 = <span class="keyword">new</span> JedisShardInfo(<span class="string">"192.168.175.129"</span>,<span class="number">6381</span>);</span><br><span class="line">	shards.add(info1);</span><br><span class="line">	shards.add(info2);</span><br><span class="line">	shards.add(info3);</span><br><span class="line">	<span class="comment">//操作分片 redis对象工具类</span></span><br><span class="line">	ShardedJedis shardedJedis = <span class="keyword">new</span> ShardedJedis(shards);</span><br><span class="line">	shardedJedis.set(<span class="string">"1902"</span>,<span class="string">"1902班"</span>);</span><br><span class="line">	System.out.println(shardedJedis.get(<span class="string">"1902"</span>));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Hash一致性算法"><a href="#Hash一致性算法" class="headerlink" title="Hash一致性算法"></a>Hash一致性算法</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p><strong>概念:同一个字符串hash值是一致的.</strong></p>
<h4 id="Hash一致性说明"><a href="#Hash一致性说明" class="headerlink" title="Hash一致性说明"></a>Hash一致性说明</h4><p><img src="https://s2.ax1x.com/2019/06/24/ZADg1A.png" alt=""></p>
<h4 id="Hash一致性——特性"><a href="#Hash一致性——特性" class="headerlink" title="Hash一致性——特性"></a>Hash一致性——特性</h4><h5 id="问题说明"><a href="#问题说明" class="headerlink" title="问题说明"></a>问题说明</h5><p><strong>因为所有节点都是通过ip地址加算法计算获取的,则可能会出现节点分配不均的问题.导致数据丢失.</strong></p>
<h5 id="均衡性"><a href="#均衡性" class="headerlink" title="均衡性"></a>均衡性</h5><p><strong>说明:均衡性要求节点中的数据尽可能的平均.</strong><br><strong>措施:引入虚拟节点概念</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZArn4e.png" alt=""></p>
<h5 id="单调性"><a href="#单调性" class="headerlink" title="单调性"></a>单调性</h5><p><strong>说明:当节点新增时,能够实现数据的自动的迁移.</strong><br><strong>补充说明:如果节点一旦丢失,则导致内存丢失则整个分片无法使用.</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZArDuq.png" alt=""></p>
<h5 id="分散性"><a href="#分散性" class="headerlink" title="分散性"></a>分散性</h5><p><strong>概念:由于分布式原因,导致系统不能获取全部的内存空间.导致一个key有多个位置.</strong></p>
<h5 id="负载"><a href="#负载" class="headerlink" title="负载"></a>负载</h5><p><strong>概念:由于分布式原因,系统不能获取全部的内存地址.导致同一个位置保存多个数据</strong></p>
<h3 id="Spring整合Redis分片"><a href="#Spring整合Redis分片" class="headerlink" title="Spring整合Redis分片"></a>Spring整合Redis分片</h3><h4 id="编辑properties文件"><a href="#编辑properties文件" class="headerlink" title="编辑properties文件"></a>编辑properties文件</h4><p><strong>redis.nodes=ip:端口，ip:端口，……</strong><br><strong>redis.nodes=192.168.175.129:6379,192.168.175.129:6380,192.168.175.129:6381</strong></p>
<h4 id="编辑配置类-1"><a href="#编辑配置类-1" class="headerlink" title="编辑配置类"></a>编辑配置类</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表示redis配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:/properties/redis.properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> </span>{</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"${redis.nodes}"</span>)</span><br><span class="line">	<span class="keyword">private</span> String redisNodes; <span class="comment">//node1,node2,node3</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ShardedJedis <span class="title">shardedJedis</span><span class="params">()</span> </span>{</span><br><span class="line">		List&lt;JedisShardInfo&gt; shards = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="comment">//ip:端口,ip:端口</span></span><br><span class="line">		String[] nodes = redisNodes.split(<span class="string">","</span>);</span><br><span class="line">		<span class="keyword">for</span> (String node : nodes) {</span><br><span class="line">			String host = node.split(<span class="string">":"</span>)[<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">int</span> port = Integer.parseInt(node.split(<span class="string">":"</span>)[<span class="number">1</span>]);</span><br><span class="line">			JedisShardInfo info = <span class="keyword">new</span> JedisShardInfo(host, port);</span><br><span class="line">			shards.add(info);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> ShardedJedis(shards);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Redis持久化策略"><a href="#Redis持久化策略" class="headerlink" title="Redis持久化策略"></a>Redis持久化策略</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p><strong>Redis中的数据都在内存中,如果断电宕机则内存数据丢失.其中数据应该持久化保存.不允许丢失.</strong><br><strong>持久化策略:</strong><br><strong>1. RDB模式</strong><br><strong>2. AOF模式</strong></p>
<h3 id="Redis持久化工作原理"><a href="#Redis持久化工作原理" class="headerlink" title="Redis持久化工作原理"></a>Redis持久化工作原理</h3><p><strong>说明:按照配置的时间,定期将内存数据保存到redis中的持久化文件中.</strong><br><strong>当redis服务器宕机之后重启时,首先读取指定的持久化文件,恢复内存数据,方便用户使用.</strong></p>
<h3 id="RDB模式"><a href="#RDB模式" class="headerlink" title="RDB模式"></a>RDB模式</h3><p><strong>概念:</strong><br><strong>​    RDB模式是Redis中默认的持久化策略.保存的是redis的内存快照。占用的资源少.持久化效率最高的.</strong><br><strong>RDB特点:</strong><br><strong>​        1.RDB模式能够定期持久化,但是有丢失数据的风险.</strong><br><strong>​        2.Redis中默认的持久化策略</strong><br><strong>​        3.RDB模式做内存的快照. 效率高</strong><br><strong>​        4.占用磁盘空间较小.</strong></p>
<h4 id="RDB模式配置"><a href="#RDB模式配置" class="headerlink" title="RDB模式配置"></a>RDB模式配置</h4><p><strong>1. 修改持久化文件名称</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAsA2j.png" alt=""><br><strong>2.持久化文件目录设定</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAsmq0.png" alt=""><br><strong>3.持久化策略</strong><br><strong>save 900 1      用户在900秒内做1次set操作时持久化1次</strong><br><strong>save 300 10     用户在300秒内做10次set草时持久化1次</strong><br><strong>save 60  10000        60秒内做10000次set 持久化一次</strong></p>
<p><strong>使用save持久化化时,如果执行持久化操作,则程序陷入阻塞.用户不能执行set.</strong></p>
<h3 id="AOF模式"><a href="#AOF模式" class="headerlink" title="AOF模式"></a>AOF模式</h3><p><strong>特点:</strong><br><strong>1. AOF模式可以实现数据的实时持久化.</strong><br><strong>2. 记录的是用户的操作过程.</strong><br><strong>3. 持久化文件会比较大.</strong><br><strong>4. 持久化效率低.</strong><br><strong>5. AOF模式默认是关闭的</strong><br><strong>6. AOF模式持久化是异步的.</strong></p>
<h4 id="AOF模式持久化策略"><a href="#AOF模式持久化策略" class="headerlink" title="AOF模式持久化策略"></a>AOF模式持久化策略</h4><p><strong>1.开启AOF模式</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAsMIU.png" alt=""><br><strong>2.修改持久化文件名称</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAsOoT.png" alt=""><br><strong>3.持久化策略</strong><br><strong># appendfsync always  只要用户执行”更新”命令则持久化一次</strong><br><strong>appendfsync everysec  每秒持久化一次.</strong><br><strong># appendfsync no        由默认的操作系统决定什么时候持久化.</strong></p>
<h3 id="Redis缓存策略说明"><a href="#Redis缓存策略说明" class="headerlink" title="Redis缓存策略说明"></a>Redis缓存策略说明</h3><p><strong>1. 如果有并发查询时.如果缓存服务器宕机/缓存失效.则查询数据库.可能导致数据库宕机. 俗称<font color="red*">缓存雪崩</font></strong><br><strong>2. 如果用户,高并发查询一个不存在的数据时.后台数据库有宕机的风险，俗称<font color="red*">缓存穿透</font></strong><br><strong>限流 直至封杀IP地址. IP模拟器</strong><br><strong>3. 如果高并发条件下.当某一个热点的key,超时或者失效时.数据库有宕机的风险.俗称:<font color="red*">缓存击穿</font></strong></p>
<h3 id="Redis内存机制"><a href="#Redis内存机制" class="headerlink" title="Redis内存机制"></a>Redis内存机制</h3><h4 id="业务需求"><a href="#业务需求" class="headerlink" title="业务需求"></a>业务需求</h4><p><strong>Redis中的数据都保存内存中.内存中的数据如果一味的新增,不删除则内存数据很快存满.导致新的数据保存错误.</strong><br><strong>需求:用户每次都能存储数据,但是内存大小是可控的.要求动态维护内存大小.</strong></p>
<h4 id="Redis中内存策略"><a href="#Redis中内存策略" class="headerlink" title="Redis中内存策略"></a>Redis中内存策略</h4><h5 id="LRU算法"><a href="#LRU算法" class="headerlink" title="LRU算法"></a>LRU算法</h5><p><strong><a href="https://baike.baidu.com/item/内存管理/5633616" target="_blank" rel="noopener">内存管理</a>的一种页面置换算法，对于在内存中但又不用的<a href="https://baike.baidu.com/item/数据块/107672" target="_blank" rel="noopener">数据块</a>（内存块）叫做LRU，操作系统会根据哪些数据属于LRU而将其移出内存而腾出空间来加载另外的数据。</strong></p>
<h5 id="LFU算法"><a href="#LFU算法" class="headerlink" title="LFU算法"></a>LFU算法</h5><p><strong>LFU（least frequently used (LFU) page-replacement algorithm）。即最不经常使用页置换算法，要求在页置换时置换引用计数最小的页，因为经常使用的页应该有一个较大的引用次数。但是有些页在开始时使用次数很多，但以后就不再使用，这类页将会长时间留在内存中，因此可以将引用计数寄存器定时右移一位，形成指数衰减的平均使用次数。</strong></p>
<p><strong>LFU:根据数据使用的次数多少删除数据.</strong></p>
<h5 id="内存优化策略"><a href="#内存优化策略" class="headerlink" title="内存优化策略"></a>内存优化策略</h5><p><strong>1. volatile-lru设定超时时间的数据采用LRU算法删除数据.</strong><br><strong>2. allkeys-lru所有的数据采用LRU算法删除数据</strong><br><strong>3. volatile-lfu设定了超时时间的数据采用LFU删除数据</strong><br><strong>4. allkeys-lfu所有的数据采用LFU算法删除数据</strong><br><strong>5. volatile-random设定了超时时间的随机删除</strong><br><strong>6. allkeys-random所有key随机删除</strong><br><strong>7. volatile-ttl设定了超时时间的数据排序.将马上要超时的数据提前删除.</strong><br><strong>8. Noeviction不删除数据.如果内存数据存满则报错返回. 该策略是默认策略</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZA2sbR.png" alt=""></p>
<h2 id="Redis主从同步"><a href="#Redis主从同步" class="headerlink" title="Redis主从同步"></a>Redis主从同步</h2><h3 id="高可用介绍-HA"><a href="#高可用介绍-HA" class="headerlink" title="高可用介绍(HA)"></a>高可用介绍(HA)</h3><p><strong>“高可用性”（High Availability）通常来描述一个系统经过专门的设计，从而减少停工时间，而保持其服务的高度可用性。</strong><br><strong>概括:利用技术手段实现了当服务器宕机,自动的实现故障的迁移.</strong></p>
<h3 id="业务说明"><a href="#业务说明" class="headerlink" title="业务说明"></a>业务说明</h3><p><strong>Redis的最终形态必须实现高可用,实现高可用的前提必须满足<font color="orange">主从同步</font>.</strong><br><strong>当发生故障,由于从机与主机的数据是相同的,所以可以非常灵活实现数据的故障迁移.</strong></p>
<h3 id="主从同步搭建"><a href="#主从同步搭建" class="headerlink" title="主从同步搭建"></a>主从同步搭建</h3><h4 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h4><p><strong>说明:将分片文件夹shards复制为sentinel.（shards文件参考上方分片）</strong><br><strong>cp –r shards sentinel</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZA42cT.md.png" alt=""></p>
<h4 id="检查主从关系"><a href="#检查主从关系" class="headerlink" title="检查主从关系"></a>检查主从关系</h4><p><strong>进入Redis-6379客户端，输入<code>info replication</code></strong><br><img src="https://s2.ax1x.com/2019/06/24/ZA5gIA.md.png" alt=""></p>
<h4 id="实现主从挂载"><a href="#实现主从挂载" class="headerlink" title="实现主从挂载"></a>实现主从挂载</h4><p><strong>说明:6379当主机, 6380/6381当从机.</strong><br><strong>命令:在客户端中cli端 执行指令 **
**<code>saveof  IP  端口</code></strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAok7Q.md.png" alt=""></p>
<p><strong>挂载情况</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAoUc6.md.png" alt=""></p>
<p><strong>主从测试</strong></p>
<p><strong>当在6379中写入数据时,从机80/81也同步了数据.</strong></p>
<h4 id="主从同步持久性"><a href="#主从同步持久性" class="headerlink" title="主从同步持久性"></a>主从同步持久性</h4><p><strong>问题说明:通过slaveof指令可以指定主从关系.如果从机关闭之后重启问情况如何??</strong><br><strong>回答:</strong><br><strong>​        当6381重启之后,发现主从结构不存在了.6381变为主机.</strong><br><strong>如何解决该问题:</strong><br><strong>​    需求:当6381为从机时,当重启服务器依然是从机.</strong><br><strong>​    需要人为的动态修改redis.conf配置文件.</strong></p>
<h3 id="Redis哨兵实现高可用"><a href="#Redis哨兵实现高可用" class="headerlink" title="Redis哨兵实现高可用"></a>Redis哨兵实现高可用</h3><h4 id="Redis中哨兵的作用"><a href="#Redis中哨兵的作用" class="headerlink" title="Redis中哨兵的作用"></a>Redis中哨兵的作用</h4><p><strong>分片作用:redis分片实现了redis内存扩容.</strong><br><strong>Redis哨兵:主要实现了redis节点的高可用.</strong></p>
<h4 id="Redis哨兵实现步骤"><a href="#Redis哨兵实现步骤" class="headerlink" title="Redis哨兵实现步骤"></a>Redis哨兵实现步骤</h4><p><strong>1. redis哨兵会监听redis主节点.</strong><br><strong>目的1:检查主节点是否存活</strong><br><strong>目的2:获取连接主节点的从机. IP:端口</strong><br><strong>2. 当利用ping-pong检测机制.检查主节点是否存活,当哨兵连续3次检测都没有数据返回.则表明主节点宕机.</strong><br><strong>3. 哨兵根据从主节点获取的从节点信息,进行推选.从中挑选一台新的从节点当做现在的主节点.将新的主从关系写入其他节点的redis.conf文件中.</strong><br><strong>4. 当服务器重启后,能够了解当前主从关系,实现了redis高可用.</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAHt9s.png" alt=""></p>
<h4 id="Redis哨兵配置"><a href="#Redis哨兵配置" class="headerlink" title="Redis哨兵配置"></a>Redis哨兵配置</h4><h5 id="复制哨兵配置文件"><a href="#复制哨兵配置文件" class="headerlink" title="复制哨兵配置文件"></a>复制哨兵配置文件</h5><p><strong>cp sentinel.conf sentinel/</strong></p>
<h5 id="编辑sentinel配置文件"><a href="#编辑sentinel配置文件" class="headerlink" title="编辑sentinel配置文件"></a>编辑sentinel配置文件</h5><p><strong>1. 关闭保护模式    17行</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAquef.png" alt=""></p>
<p><strong>2.开启哨兵后台启动   26行</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAqDfJ.md.png" alt=""></p>
<p><strong>3.修改哨兵监控    84行</strong><br><strong>sentinel monitor mymaster 127.0.0.1 6379 1</strong><br><strong>mymaster:当前主机的变量</strong><br><strong>IP:端口:  redis主节点的IP和端口</strong><br><strong>投票生效票数:  **
**规则:<font color="red">超半数即可,哨兵的数量是奇数</font>.</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAqHXt.md.png" alt=""></p>
<p><strong>4.主机宕机后多久进行推选.</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZALm9J.md.png" alt=""></p>
<p><strong>5.修改哨兵推选失败超时时间.</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZALwut.md.png" alt=""></p>
<h4 id="Redis哨兵测试"><a href="#Redis哨兵测试" class="headerlink" title="Redis哨兵测试"></a>Redis哨兵测试</h4><p><strong>1. 启动redis哨兵</strong><br><strong>redis-sentinel sentinel.conf</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAOma8.md.png" alt=""></p>
<p><strong>2. 当关闭redis-6379之后等10秒之后.检查主从结构是否正确.</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZAOXWQ.md.png" alt=""></p>
<h4 id="Spring整合哨兵"><a href="#Spring整合哨兵" class="headerlink" title="Spring整合哨兵"></a>Spring整合哨兵</h4><h5 id="入门案例-2"><a href="#入门案例-2" class="headerlink" title="入门案例"></a>入门案例</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试哨兵get/set操作</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="comment">//masterName 代表主机的变量名称</span></span><br><span class="line">	<span class="comment">//sentinels  Set&lt;String&gt;  IP:端口</span></span><br><span class="line">	Set&lt;String&gt; sentinels = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">	sentinels.add(<span class="string">"192.168.175.129:26379"</span>);</span><br><span class="line">	JedisSentinelPool sentinelPool = </span><br><span class="line">	<span class="keyword">new</span> JedisSentinelPool(<span class="string">"mymaster"</span>, sentinels);</span><br><span class="line">	Jedis jedis = sentinelPool.getResource();</span><br><span class="line">	jedis.set(<span class="string">"z"</span>, <span class="string">"dd"</span>);</span><br><span class="line">	System.out.println(jedis.get(<span class="string">"z"</span>));</span><br><span class="line">	jedis.close();	<span class="comment">//关闭链接</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="Spring整合哨兵思路"><a href="#Spring整合哨兵思路" class="headerlink" title="Spring整合哨兵思路"></a>Spring整合哨兵思路</h5><p><strong>1. 利用配置类,封装JedisSentinelPool.</strong><br><strong>2. 利用工具API封装2个方法.set/get</strong></p>
<h5 id="编辑pro文件-1"><a href="#编辑pro文件-1" class="headerlink" title="编辑pro文件"></a>编辑pro文件</h5><p><strong>redis.sentinels=192.168.175.129:26379</strong><br><strong>redis.sentinel.masterName=mymaster</strong></p>
<h5 id="编辑配置类-2"><a href="#编辑配置类-2" class="headerlink" title="编辑配置类"></a>编辑配置类</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表示redis配置类</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//xml</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:/properties/redis.properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> </span>{</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"${redis.sentinels}"</span>)   </span><br><span class="line">	<span class="keyword">private</span> String jedisSentinelNodes;</span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"${redis.sentinel.masterName}"</span>)</span><br><span class="line">	<span class="keyword">private</span> String masterName;</span><br><span class="line">	<span class="meta">@Bean</span>		</span><br><span class="line">	<span class="function"><span class="keyword">public</span> JedisSentinelPool <span class="title">jedisSentinelPool</span><span class="params">()</span> </span>{</span><br><span class="line">		Set&lt;String&gt; sentinels = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">		sentinels.add(jedisSentinelNodes);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> JedisSentinelPool(masterName, sentinels);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="编辑工具API"><a href="#编辑工具API" class="headerlink" title="编辑工具API"></a>编辑工具API</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisService</span> </span>{</span><br><span class="line">	<span class="meta">@Autowired</span>(required = <span class="keyword">false</span>)<span class="comment">//调用时才注入</span></span><br><span class="line">	<span class="keyword">private</span> JedisSentinelPool sentinelPool;</span><br><span class="line">	<span class="comment">//封装方法  get</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(String key)</span> </span>{</span><br><span class="line">		Jedis jedis = sentinelPool.getResource();</span><br><span class="line">		String result = jedis.get(key);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	}</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String key,String value)</span> </span>{</span><br><span class="line">		Jedis jedis = sentinelPool.getResource();</span><br><span class="line">		jedis.set(key, value);</span><br><span class="line">		jedis.close();</span><br><span class="line">	}	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setex</span><span class="params">(String key,<span class="keyword">int</span> seconds,String value)</span> </span>{</span><br><span class="line">		Jedis jedis = sentinelPool.getResource();</span><br><span class="line">		jedis.setex(key, seconds, value);</span><br><span class="line">		jedis.close();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h5 id="编辑RedisAOP配置项"><a href="#编辑RedisAOP配置项" class="headerlink" title="编辑RedisAOP配置项"></a>编辑RedisAOP配置项</h5><p><img src="https://s2.ax1x.com/2019/06/24/ZAvRiT.md.png" alt=""></p>
<h5 id="项目测试"><a href="#项目测试" class="headerlink" title="项目测试"></a>项目测试</h5><p><strong>说明:重启tomcat服务器.检查程序调用是否正确.当redis节点宕机时.检查是否影响用户操作redis.</strong></p>
<h2 id="Redis集群"><a href="#Redis集群" class="headerlink" title="Redis集群"></a>Redis集群</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p><strong>1. Redis分片</strong><br><strong>用户通过API利用hash一致性算法,实现了数据存储.利用分片机制实现了内存的扩容!!!</strong><br><strong>缺点:如果一个节点宕机.,则违反单调性要求,分片失效.</strong><br><strong>2. Redis哨兵</strong><br><strong>哨兵基于心跳检测机制.实现redis节点高可用.但是前提必须配置主从.</strong><br><strong>哨兵缺点:</strong><br><strong>1. 操作的redis依然是单台,内存无法扩容.</strong><br><strong>2. Redis哨兵也有可能宕机.</strong></p>
<p><strong>分片:没有高可用效果.</strong><br><strong>哨兵:哨兵本身没有高可用需要借助第三方. 内存没有扩容.</strong></p>
<h3 id="Redis集群介绍"><a href="#Redis集群介绍" class="headerlink" title="Redis集群介绍"></a>Redis集群介绍</h3><p><strong>说明:搭建redis集群可以实现redis分片和哨兵的全部功能!!!.Redis集群中<font color="red">所有的主节点参与选举</font>.redis集群中全部的节点都能互相通信.所有的节点都有投票权(发现某个节点宕机投票数+1)</strong></p>
<h3 id="集群搭建"><a href="#集群搭建" class="headerlink" title="集群搭建"></a>集群搭建</h3><h4 id="集群设计"><a href="#集群设计" class="headerlink" title="集群设计"></a>集群设计</h4><p><strong>最小的集群单位3个主节点,从机不做要求,搭建策略一主一从</strong><br><strong>主机3台</strong><br><strong>​    端口:7000/7001/7002</strong><br><strong>从机3台</strong><br><strong>​    端口:7003/7004/7005</strong></p>
<h4 id="准备集群文件"><a href="#准备集群文件" class="headerlink" title="准备集群文件"></a>准备集群文件</h4><p><strong>1.准备集群文件夹</strong></p>
<p><strong>redis根目录下<code>Mkdir cluster</code></strong></p>
<p><strong>2.在cluster文件夹中分别创建7000-7005文件夹</strong><br><strong><code>mkdir 7000 7001 7002 7003 7004 7005</code></strong></p>
<h4 id="复制配置文件-1"><a href="#复制配置文件-1" class="headerlink" title="复制配置文件"></a>复制配置文件</h4><p><strong>说明:</strong><br><strong>将redis根目录中的redis.conf文件复制到cluster/7000/ 并以原名保存</strong><br><strong><code>cp redis.conf cluster/7000/</code></strong></p>
<h4 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h4><p><strong>1. 注释本地绑定IP地址</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZEpDhV.png" alt=""></p>
<p><strong>2.关闭保护模式</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZEphA1.png" alt=""></p>
<p><strong>3.修改端口号</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZEpo9K.png" alt=""></p>
<p><strong>4. 启动后台启动</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZEpHje.png" alt=""></p>
<p><strong>5. 修改pid文件</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZEpx4P.md.png" alt=""></p>
<p><strong>6. 修改持久化文件路径</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZE9FBj.md.png" alt=""></p>
<p><strong>7. 设定内存优化策略</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZE9mCV.md.png" alt=""></p>
<p><strong>8. 关闭AOF模式</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZE9KvF.md.png" alt=""></p>
<p><strong>9. 开启集群配置</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZE9Qu4.png" alt=""></p>
<p><strong>10. 开启集群配置文件，保存集群中的状态信息.谁是主机,谁是从机</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZE91b9.md.png" alt=""></p>
<p><strong>11. 修改集群超时时间</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZE9UgO.png" alt=""></p>
<h4 id="复制修改后的配置文件"><a href="#复制修改后的配置文件" class="headerlink" title="复制修改后的配置文件"></a>复制修改后的配置文件</h4><p><strong>说明:将7000文件夹下的redis.conf文件分别复制到7001-7005中</strong></p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost cluster]# cp 7000/redis.conf  7001/</span><br><span class="line">[root@localhost cluster]# cp 7000/redis.conf  7002/</span><br><span class="line">[root@localhost cluster]# cp 7000/redis.conf  7003/</span><br><span class="line">[root@localhost cluster]# cp 7000/redis.conf  7004/</span><br><span class="line">[root@localhost cluster]# cp 7000/redis.conf  7005/</span><br></pre></td></tr></tbody></table></figure>

<h4 id="批量修改"><a href="#批量修改" class="headerlink" title="批量修改"></a>批量修改</h4><p><strong>说明:分别将7001-7005文件中的7000改为对应的端口号的名称,</strong><br><strong>修改时注意方向键的使用</strong><br><img src="https://s2.ax1x.com/2019/06/24/ZE9XMF.md.png" alt=""></p>
<h4 id="通过脚本编辑启动-关闭命令"><a href="#通过脚本编辑启动-关闭命令" class="headerlink" title="通过脚本编辑启动/关闭命令"></a>通过脚本编辑启动/关闭命令</h4><p><strong>1. 创建启动脚本  <code>vim start.sh</code></strong><br><img src="https://s2.ax1x.com/2019/06/24/ZECMJP.png" alt=""></p>
<p><strong>2.编辑关闭的脚本    <code>vim  shutdown.sh</code></strong><br><img src="https://s2.ax1x.com/2019/06/24/ZEC0zT.png" alt=""></p>
<p><strong>3.启动redis节点<code>sh start.sh</code></strong></p>
<p><strong>4.检查redis节点启动是否正常</strong></p>
<p><strong><code>ps ef | grep redis</code></strong><br><img src="https://s2.ax1x.com/2019/06/25/ZEh19x.md.png" alt=""></p>
<h4 id="创建redis集群"><a href="#创建redis集群" class="headerlink" title="创建redis集群"></a>创建redis集群</h4><p><strong>#5.0版本执行 使用C语言内部管理集群</strong><br><strong><code>redis-cli --cluster create --cluster-replicas 1 192.168.35.130:7000 192.168.35.130:7001 192.168.35.130:7002 192.168.35.130:7003 192.168.35.130:7004 192.168.35.130:7005</code></strong><br><img src="https://s2.ax1x.com/2019/06/25/ZEhGjO.md.png" alt=""><br><img src="https://s2.ax1x.com/2019/06/25/ZEhYuD.md.png" alt=""><br><img src="https://s2.ax1x.com/2019/06/25/ZEhtDe.png" alt=""></p>
<h4 id="Redis高可用测试"><a href="#Redis高可用测试" class="headerlink" title="Redis高可用测试"></a>Redis高可用测试</h4><p><strong>1. 关闭redis主机.检查是否自动实现故障迁移.</strong><br><strong>2. 再次启动关闭的主机.检查是否能够实现自动的挂载.</strong><br><strong>一般情况下 能够实现主从挂载</strong><br><strong>个别情况: 宕机后的节点重启,可能挂载到其他主节点中(7001-7002) 正确的</strong><br><img src="https://s2.ax1x.com/2019/06/25/ZEhw4I.png" alt=""></p>
<h3 id="Redis集群工作原理"><a href="#Redis集群工作原理" class="headerlink" title="Redis集群工作原理"></a>Redis集群工作原理</h3><h4 id="数据存储原理"><a href="#数据存储原理" class="headerlink" title="数据存储原理"></a>数据存储原理</h4><p><strong><font color="orange">分片数据存储原理</font>: 根据hash一致性算法实现数据存储.</strong><br><strong>Hash一致性运算发生在服务器端.</strong><br><strong>在存储数据前已经计算完成存储到哪台redis服务器中.</strong><br><strong>分片中存在的问题:</strong><br>*<em>​    分片的数据是用户通过服务器程序计算进行存储.用户也可以利用redis的客户端进行非法的操作.修改分片中的数据!!!    *</em></p>
<p><strong><font color="orange">集群中数据存储</font>：1.当在从节点中存储数据时.不允许操作,只有主节点能够set/get数据。2.Redis集群与分片明显不同.存储数据必须满足条件.</strong><br><img src="https://s2.ax1x.com/2019/06/25/ZEhf5n.md.png" alt=""><br><img src="https://s2.ax1x.com/2019/06/25/ZE4eRP.md.png" alt=""></p>
<p><strong><font color="orange">Redis集群储存条件</font>：</strong><br><img src="https://s2.ax1x.com/2019/06/25/ZE4KsS.md.png" alt=""><br><img src="https://s2.ax1x.com/2019/06/25/ZE4Mqg.png" alt=""><br><strong>说明:redis集群一共有16384个槽位.这些操作会均匀的分配给主节点.</strong><br><strong>当数据进行存取时首先根据key进行计算.计算槽位的位置.之后从节点中获取数据.</strong><br><img src="https://s2.ax1x.com/2019/06/25/ZE4lZQ.md.png" alt=""><br><strong>Crc16算法</strong></p>
<h4 id="Redis集群宕机条件"><a href="#Redis集群宕机条件" class="headerlink" title="Redis集群宕机条件"></a>Redis集群宕机条件</h4><p><strong>宕机条件:Redis集群宕机的条件是<font color="red">主节点宕机</font>则集群奔溃</strong><br><strong>例子:9个redis节点   3主6从 节点宕机多少次集群奔溃</strong><br><strong>5-7台集群奔溃</strong><br><img src="https://s2.ax1x.com/2019/06/25/ZE4YR0.png" alt=""><br><strong>条件说明:Redis集群中当节点宕机后,由主节点进行推选.如果当前节点没有从节点时.从其他主节点中借用多余的从节点</strong></p>
<h3 id="SpringBoot整合Redis集群"><a href="#SpringBoot整合Redis集群" class="headerlink" title="SpringBoot整合Redis集群"></a>SpringBoot整合Redis集群</h3><h4 id="测试案例"><a href="#测试案例" class="headerlink" title="测试案例"></a>测试案例</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>{</span><br><span class="line">	Set&lt;HostAndPort&gt; sets = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">	sets.add(<span class="keyword">new</span> HostAndPort(<span class="string">"192.168.175.129"</span>,<span class="number">7000</span>));</span><br><span class="line">	sets.add(<span class="keyword">new</span> HostAndPort(<span class="string">"192.168.175.129"</span>,<span class="number">7001</span>));</span><br><span class="line">	sets.add(<span class="keyword">new</span> HostAndPort(<span class="string">"192.168.175.129"</span>,<span class="number">7002</span>));</span><br><span class="line">	sets.add(<span class="keyword">new</span> HostAndPort(<span class="string">"192.168.175.129"</span>,<span class="number">7003</span>));</span><br><span class="line">	sets.add(<span class="keyword">new</span> HostAndPort(<span class="string">"192.168.175.129"</span>,<span class="number">7004</span>));</span><br><span class="line">	sets.add(<span class="keyword">new</span> HostAndPort(<span class="string">"192.168.175.129"</span>,<span class="number">7005</span>));</span><br><span class="line">	JedisCluster cluster = <span class="keyword">new</span> JedisCluster(sets);</span><br><span class="line">	cluster.set(<span class="string">"1902"</span>, <span class="string">"集群搭建完成"</span>);</span><br><span class="line">	System.out.println(<span class="string">"获取集群数据:"</span>+cluster.get(<span class="string">"1902"</span>));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="编辑pro文件-2"><a href="#编辑pro文件-2" class="headerlink" title="编辑pro文件"></a>编辑pro文件</h4><p><strong><code>redis.nodes=192.168.175.129:7000,192.168.175.129:7001,192.168.175.129:7002,192.168.175.129:7003,192.168.175.129:7004,192.168.175.129:7005</code></strong></p>
<h4 id="编辑配置类-3"><a href="#编辑配置类-3" class="headerlink" title="编辑配置类"></a>编辑配置类</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表示redis配置类</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//xml</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:/properties/redis.properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> </span>{</span><br><span class="line"><span class="comment">//redis.nodes=192.168.175.129:7000,192.168.175.129:7001,192.168.175.129:7002,192.168.175.129:7003,192.168.175.129:7004,192.168.175.129:7005</span></span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"${redis.nodes}"</span>)</span><br><span class="line">	<span class="keyword">private</span> String redisNodes;</span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> JedisCluster <span class="title">jedisCluster</span><span class="params">()</span> </span>{</span><br><span class="line">		Set&lt;HostAndPort&gt; nodes = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">		<span class="comment">//1.根据,号拆分为多个node</span></span><br><span class="line">		String[] strNode = redisNodes.split(<span class="string">","</span>);</span><br><span class="line">		<span class="comment">//IP:端口</span></span><br><span class="line">		<span class="keyword">for</span> (String node : strNode) {</span><br><span class="line">			String host = node.split(<span class="string">":"</span>)[<span class="number">0</span>];</span><br><span class="line">			<span class="keyword">int</span> port = Integer.parseInt(node.split(<span class="string">":"</span>)[<span class="number">1</span>]);</span><br><span class="line">			HostAndPort hostAndPort = </span><br><span class="line">					<span class="keyword">new</span> HostAndPort(host, port);</span><br><span class="line">			nodes.add(hostAndPort);</span><br><span class="line">		}		</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> JedisCluster(nodes);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="修改AOP切面"><a href="#修改AOP切面" class="headerlink" title="修改AOP切面"></a>修改AOP切面</h4><p><img src="https://s2.ax1x.com/2019/06/25/ZE4BdJ.png" alt=""></p>

      
    </div>
    
    
    
	<div>
		
			<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
		
	</div>
    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/weixin.png" alt="ボ wechat" style="width: 200px; max-width: 100%;">
    <div>扫描二维码，可获得菜鸡一枚</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>打赏测试</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="ボ 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="ボ 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
	
    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/java/" rel="tag"><i class="fa fa-at"></i>
java</a>
          
            <a href="/blog/tags/redis/" rel="tag"><i class="fa fa-at"></i>
redis</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2019/06/24/weifuwu/" rel="next" title="微服务基础">
                <i class="fa fa-chevron-left"></i> 微服务基础
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2019/06/24/redis02/" rel="prev" title="redis常用命令">
                redis常用命令 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80NDc0Ni8yMTI2Nw"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
            <a href="/">
              <img class="site-author-image" itemprop="image" src="/blog/images/20190616154611.jpg" alt="ボ">
            </a>
            
              <p class="site-author-name" itemprop="name">ボ</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/blog/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/blog/tags/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/blog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/51461" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1011186201@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          
			<div>
				
					<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="210" height="110" src="//music.163.com/outchain/player?type=0&amp;id=2593269916&amp;auto=1&amp;height=66"></iframe> 
				
			</div>
          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                大佬们
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://ovvow.com/" title="冒泡大佬" target="_blank">冒泡大佬</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.cnblogs.com/Tu9oh0st/" title="蔡总" target="_blank">蔡总</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.cnblogs.com/hanyuhuang/" title="奶子哥" target="_blank">奶子哥</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://yexua.github.io/" title="歌佬" target="_blank">歌佬</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.csdn.net/weixin_38896998" title="go佬" target="_blank">go佬</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.cnblogs.com/fromzore/" title="过儿大佬" target="_blank">过儿大佬</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://cyc2018.github.io/CS-Notes/#/README" title="CyC大佬" target="_blank">CyC大佬</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://snailclimb.top/JavaGuide/#/" title="javaGuide" target="_blank">javaGuide</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://crossoverjie.top/JCSprout/#/" title="JCSprout" target="_blank">JCSprout</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://yubutong.cn/" title="于佬" target="_blank">于佬</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://note.youdao.com/ynoteshare1/index.html?id=cd06b5757e02a27026e7c5b12898a85c&amp;type=note" title="SC" target="_blank">SC</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis介绍"><span class="nav-number">1.</span> <span class="nav-text">Redis介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis性能"><span class="nav-number">2.</span> <span class="nav-text">Redis性能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis安装和使用"><span class="nav-number">3.</span> <span class="nav-text">Redis安装和使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装redis"><span class="nav-number">3.1.</span> <span class="nav-text">安装redis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改配置文件"><span class="nav-number">3.2.</span> <span class="nav-text">修改配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#去除IP绑定"><span class="nav-number">3.2.1.</span> <span class="nav-text">去除IP绑定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关闭保护模式"><span class="nav-number">3.2.2.</span> <span class="nav-text">关闭保护模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#开启后台启动"><span class="nav-number">3.2.3.</span> <span class="nav-text">开启后台启动</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VIM常见报错"><span class="nav-number">3.3.</span> <span class="nav-text">VIM常见报错</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis运行命令"><span class="nav-number">3.4.</span> <span class="nav-text">Redis运行命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#启动命令"><span class="nav-number">3.4.1.</span> <span class="nav-text">启动命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进入客户端"><span class="nav-number">3.4.2.</span> <span class="nav-text">进入客户端</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis关闭"><span class="nav-number">3.4.3.</span> <span class="nav-text">Redis关闭</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis入门案例"><span class="nav-number">4.</span> <span class="nav-text">Redis入门案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#linux防火墙操作密令"><span class="nav-number">4.1.</span> <span class="nav-text">linux防火墙操作密令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加jar包文件"><span class="nav-number">4.2.</span> <span class="nav-text">添加jar包文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#入门案例——String"><span class="nav-number">4.3.</span> <span class="nav-text">入门案例——String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#入门案例——hash"><span class="nav-number">4.4.</span> <span class="nav-text">入门案例——hash</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#入门案例——List"><span class="nav-number">4.5.</span> <span class="nav-text">入门案例——List</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringBoot整合Redis"><span class="nav-number">4.6.</span> <span class="nav-text">SpringBoot整合Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#导入jar包"><span class="nav-number">4.6.1.</span> <span class="nav-text">导入jar包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#入门案例"><span class="nav-number">4.6.2.</span> <span class="nav-text">入门案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#超时时间定时"><span class="nav-number">4.6.3.</span> <span class="nav-text">超时时间定时</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对象转化JSON"><span class="nav-number">4.6.4.</span> <span class="nav-text">对象转化JSON</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#转化说明"><span class="nav-number">4.6.4.1.</span> <span class="nav-text">转化说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对象与JSON互转"><span class="nav-number">4.6.4.2.</span> <span class="nav-text">对象与JSON互转</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#List与JSON互转"><span class="nav-number">4.6.4.3.</span> <span class="nav-text">List与JSON互转</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑pro文件"><span class="nav-number">4.6.5.</span> <span class="nav-text">编辑pro文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑配置类"><span class="nav-number">4.6.6.</span> <span class="nav-text">编辑配置类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设定虚拟机静态IP"><span class="nav-number">5.</span> <span class="nav-text">设定虚拟机静态IP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis分片机制"><span class="nav-number">6.</span> <span class="nav-text">Redis分片机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis单台问题"><span class="nav-number">6.1.</span> <span class="nav-text">Redis单台问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis分片（分区）介绍"><span class="nav-number">6.2.</span> <span class="nav-text">Redis分片（分区）介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分片搭建"><span class="nav-number">6.3.</span> <span class="nav-text">分片搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建新文件"><span class="nav-number">6.3.1.</span> <span class="nav-text">创建新文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#复制配置文件"><span class="nav-number">6.3.2.</span> <span class="nav-text">复制配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改端口号"><span class="nav-number">6.3.3.</span> <span class="nav-text">修改端口号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动多台Redis"><span class="nav-number">6.3.4.</span> <span class="nav-text">启动多台Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#启动Redis"><span class="nav-number">6.3.4.1.</span> <span class="nav-text">启动Redis</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#检查redis服务"><span class="nav-number">6.3.4.2.</span> <span class="nav-text">检查redis服务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis分片测试"><span class="nav-number">6.4.</span> <span class="nav-text">Redis分片测试</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#入门案例-1"><span class="nav-number">6.4.1.</span> <span class="nav-text">入门案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hash一致性算法"><span class="nav-number">6.5.</span> <span class="nav-text">Hash一致性算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#概念"><span class="nav-number">6.5.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hash一致性说明"><span class="nav-number">6.5.2.</span> <span class="nav-text">Hash一致性说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hash一致性——特性"><span class="nav-number">6.5.3.</span> <span class="nav-text">Hash一致性——特性</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#问题说明"><span class="nav-number">6.5.3.1.</span> <span class="nav-text">问题说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#均衡性"><span class="nav-number">6.5.3.2.</span> <span class="nav-text">均衡性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#单调性"><span class="nav-number">6.5.3.3.</span> <span class="nav-text">单调性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分散性"><span class="nav-number">6.5.3.4.</span> <span class="nav-text">分散性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#负载"><span class="nav-number">6.5.3.5.</span> <span class="nav-text">负载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring整合Redis分片"><span class="nav-number">6.6.</span> <span class="nav-text">Spring整合Redis分片</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑properties文件"><span class="nav-number">6.6.1.</span> <span class="nav-text">编辑properties文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑配置类-1"><span class="nav-number">6.6.2.</span> <span class="nav-text">编辑配置类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis持久化策略"><span class="nav-number">7.</span> <span class="nav-text">Redis持久化策略</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#说明"><span class="nav-number">7.1.</span> <span class="nav-text">说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis持久化工作原理"><span class="nav-number">7.2.</span> <span class="nav-text">Redis持久化工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RDB模式"><span class="nav-number">7.3.</span> <span class="nav-text">RDB模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#RDB模式配置"><span class="nav-number">7.3.1.</span> <span class="nav-text">RDB模式配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AOF模式"><span class="nav-number">7.4.</span> <span class="nav-text">AOF模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#AOF模式持久化策略"><span class="nav-number">7.4.1.</span> <span class="nav-text">AOF模式持久化策略</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis缓存策略说明"><span class="nav-number">7.5.</span> <span class="nav-text">Redis缓存策略说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis内存机制"><span class="nav-number">7.6.</span> <span class="nav-text">Redis内存机制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#业务需求"><span class="nav-number">7.6.1.</span> <span class="nav-text">业务需求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis中内存策略"><span class="nav-number">7.6.2.</span> <span class="nav-text">Redis中内存策略</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#LRU算法"><span class="nav-number">7.6.2.1.</span> <span class="nav-text">LRU算法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#LFU算法"><span class="nav-number">7.6.2.2.</span> <span class="nav-text">LFU算法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#内存优化策略"><span class="nav-number">7.6.2.3.</span> <span class="nav-text">内存优化策略</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis主从同步"><span class="nav-number">8.</span> <span class="nav-text">Redis主从同步</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#高可用介绍-HA"><span class="nav-number">8.1.</span> <span class="nav-text">高可用介绍(HA)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#业务说明"><span class="nav-number">8.2.</span> <span class="nav-text">业务说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主从同步搭建"><span class="nav-number">8.3.</span> <span class="nav-text">主从同步搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#复制文件"><span class="nav-number">8.3.1.</span> <span class="nav-text">复制文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#检查主从关系"><span class="nav-number">8.3.2.</span> <span class="nav-text">检查主从关系</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实现主从挂载"><span class="nav-number">8.3.3.</span> <span class="nav-text">实现主从挂载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#主从同步持久性"><span class="nav-number">8.3.4.</span> <span class="nav-text">主从同步持久性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis哨兵实现高可用"><span class="nav-number">8.4.</span> <span class="nav-text">Redis哨兵实现高可用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis中哨兵的作用"><span class="nav-number">8.4.1.</span> <span class="nav-text">Redis中哨兵的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis哨兵实现步骤"><span class="nav-number">8.4.2.</span> <span class="nav-text">Redis哨兵实现步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis哨兵配置"><span class="nav-number">8.4.3.</span> <span class="nav-text">Redis哨兵配置</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#复制哨兵配置文件"><span class="nav-number">8.4.3.1.</span> <span class="nav-text">复制哨兵配置文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编辑sentinel配置文件"><span class="nav-number">8.4.3.2.</span> <span class="nav-text">编辑sentinel配置文件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis哨兵测试"><span class="nav-number">8.4.4.</span> <span class="nav-text">Redis哨兵测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Spring整合哨兵"><span class="nav-number">8.4.5.</span> <span class="nav-text">Spring整合哨兵</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#入门案例-2"><span class="nav-number">8.4.5.1.</span> <span class="nav-text">入门案例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Spring整合哨兵思路"><span class="nav-number">8.4.5.2.</span> <span class="nav-text">Spring整合哨兵思路</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编辑pro文件-1"><span class="nav-number">8.4.5.3.</span> <span class="nav-text">编辑pro文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编辑配置类-2"><span class="nav-number">8.4.5.4.</span> <span class="nav-text">编辑配置类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编辑工具API"><span class="nav-number">8.4.5.5.</span> <span class="nav-text">编辑工具API</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编辑RedisAOP配置项"><span class="nav-number">8.4.5.6.</span> <span class="nav-text">编辑RedisAOP配置项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#项目测试"><span class="nav-number">8.4.5.7.</span> <span class="nav-text">项目测试</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis集群"><span class="nav-number">9.</span> <span class="nav-text">Redis集群</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#背景"><span class="nav-number">9.1.</span> <span class="nav-text">背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis集群介绍"><span class="nav-number">9.2.</span> <span class="nav-text">Redis集群介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集群搭建"><span class="nav-number">9.3.</span> <span class="nav-text">集群搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#集群设计"><span class="nav-number">9.3.1.</span> <span class="nav-text">集群设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#准备集群文件"><span class="nav-number">9.3.2.</span> <span class="nav-text">准备集群文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#复制配置文件-1"><span class="nav-number">9.3.3.</span> <span class="nav-text">复制配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑配置文件"><span class="nav-number">9.3.4.</span> <span class="nav-text">编辑配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#复制修改后的配置文件"><span class="nav-number">9.3.5.</span> <span class="nav-text">复制修改后的配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#批量修改"><span class="nav-number">9.3.6.</span> <span class="nav-text">批量修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通过脚本编辑启动-关闭命令"><span class="nav-number">9.3.7.</span> <span class="nav-text">通过脚本编辑启动/关闭命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建redis集群"><span class="nav-number">9.3.8.</span> <span class="nav-text">创建redis集群</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis高可用测试"><span class="nav-number">9.3.9.</span> <span class="nav-text">Redis高可用测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis集群工作原理"><span class="nav-number">9.4.</span> <span class="nav-text">Redis集群工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数据存储原理"><span class="nav-number">9.4.1.</span> <span class="nav-text">数据存储原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis集群宕机条件"><span class="nav-number">9.4.2.</span> <span class="nav-text">Redis集群宕机条件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringBoot整合Redis集群"><span class="nav-number">9.5.</span> <span class="nav-text">SpringBoot整合Redis集群</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#测试案例"><span class="nav-number">9.5.1.</span> <span class="nav-text">测试案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑pro文件-2"><span class="nav-number">9.5.2.</span> <span class="nav-text">编辑pro文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑配置类-3"><span class="nav-number">9.5.3.</span> <span class="nav-text">编辑配置类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改AOP切面"><span class="nav-number">9.5.4.</span> <span class="nav-text">修改AOP切面</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">© <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ボ</span>

  
</div>
<!-- 


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>


 -->


        
<div class="busuanzi-count">

  <script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访客数 <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量 <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    

  </div>

  











  












  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
  


  


  

  



  
  


  

  



  
  




  


  



  


  




	





  





  
    
  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  



  

  





  

  

  

  
  
  
  

  
  
  

  

  

  

  

  

  <!-- ҳ����С���� -->



<script type="text/javascript" src="/blog/bundle.js"></script><script type="text/javascript">if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  };(function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');;var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'poBEI9wsysN6wDF2rCWQ4G9M-gzGzoHsz',
        appKey: 'epVK9DGHHGbmHaJ3prxEz5Nw',
        placeholder: '请大佬留下您的宝贵意见',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });;// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });;pbOptions = {};
      
          pbOptions.iconStyle = "default";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
      flOptions = {};
      
          flOptions.iconStyle = "default";
      
          flOptions.boxForm = "horizontal";
      
          flOptions.position = "middleRight";
      
          flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-float', flOptions);;L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/blog/live2dw/assets/haru02.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.9},"log":false,"tagMode":false});</script><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>